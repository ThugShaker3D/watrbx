;// bundle: page___2e6c20c176102cf6961a99ea3c76e515_m
;// files: Game/Index.js, VotingPanel.js, Comments.js, Leaderboards/Leaderboard.js, PlaceProductPromotion.js, GamePass.js, ItemPurchase.js, jquery.history.js, utilities/robloxTabs.js, Games/GameDetailReferral.js, Game/GameDetailsInteractionEvents.js, PrivateServers/LinkJoin.js, utilities/robloxAds.js, Game/SignupWallPlayButton.js, widgets/Favorites.js, NumberFormatting.js, PrivateServers/PrivateServer.js, StringTruncator.js, GameItemCard.js, GameInstances/GameInstance.js, GenericModal.js, Login/SignupOrLoginModal.js, Login/SignupOrLogIn.js, Tracking/FormEvents.js, ~/viewapp/common/formEvents/formEvents.js, ~/viewapp/common/formEvents/directives/formInteraction.js, ~/viewapp/common/formEvents/directives/formContext.js, ~/viewapp/common/formEvents/directives/formValidation.js, ~/viewapp/common/formEvents/directives/formValidationRedactInput.js, ~/viewapp/common/signupOrLogin/signupOrLogin.js, ~/viewapp/common/signupOrLogin/controllers/captchaController.js, ~/viewapp/common/signupOrLogin/controllers/loginController.js, ~/viewapp/common/signupOrLogin/controllers/signupController.js, ~/viewapp/common/signupOrLogin/directives/showSection.js, ~/viewapp/common/signupOrLogin/directives/validBirthday.js, ~/viewapp/common/signupOrLogin/directives/validPassword.js, ~/viewapp/common/signupOrLogin/directives/validPasswordConfirm.js, ~/viewapp/common/signupOrLogin/directives/validUsername.js, ~/viewapp/common/signupOrLogin/services/captchaService.js, ~/viewapp/common/signupOrLogin/services/displayService.js, ~/viewapp/common/signupOrLogin/services/loginService.js, ~/viewapp/common/signupOrLogin/services/signupService.js, SignupFormValidatorGeneric.js, Events/PageHeartbeatEvent.js, GenericConfirmation.js

;// Game/Index.js
$(function(){var n=$("#badges-see-more");n.click(function(){n.text()=="See More"?n.text("See Less"):n.text("See More"),$(".badge-see-more-row").toggle()}),$(".game-play-buttons").data("autoplay")==!0&&$("#MultiplayerVisitButton").trigger("click")});

;// VotingPanel.js
var Roblox=Roblox||{};Roblox.Voting=function(){var f=function(){$(".users-vote .upvote").unbind().click(function(){i($(this),!0)}),$(".users-vote .downvote").unbind().click(function(){i($(this),!1)});var n=parseInt($(".voting-panel").data("total-up-votes")),r=parseInt($(".voting-panel").data("total-down-votes"));t(n,r)},i=function(t,i){var f=$(".voting-panel").attr("data-user-authenticated"),r;if(f.toLowerCase()=="false"){u("GuestUser");return}r=$(".voting-panel").data("asset-id"),t.hasClass("selected")||t.find("i").hasClass("selected")||t.find(".rbx-icon-like, .rbx-icon-dislike").hasClass("selected")?n(r,null):n(r,i)},n=function(n,t){$(".voting-panel .loading").show(),$.ajax({type:"POST",url:"/voting/vote?assetId="+n+"&vote="+t,success:e,error:o})},e=function(n){var o=$(".rbx-icon-like").length;if($(".voting-panel .loading").hide(),n.Success){r(n.Model.UpVotes,n.Model.DownVotes);var i=$(".voting-panel .upvote"),f=$(".voting-panel .downvote"),e=$(".users-vote");o&&(i=$(".voting-panel .upvote .rbx-icon-like"),f=$(".voting-panel .downvote .rbx-icon-dislike")),n.Model.UserVote!==null?e.hasClass("has-voted")||e.addClass("has-voted"):e.removeClass("has-voted"),i.hasClass("selected")&&i.removeClass("selected"),f.hasClass("selected")&&f.removeClass("selected"),n.Model.UserVote!==null&&(n.Model.UserVote?i.addClass("selected"):f.addClass("selected")),t(n.Model.UpVotes,n.Model.DownVotes)}else u(n.ModalType)},o=function(){$(".voting-panel .loading").hide()},t=function(n,t){var i;isNaN(n)||isNaN(t)||(i=n===0?0:t===0?100:Math.floor(n/(n+t)*100),i>100&&(i=100),$(".voting-panel .visual-container .percent").css("width",i+"%"),t>0?$(".voting-panel .visual-container .background").addClass("votes"):$(".voting-panel .visual-container .background").removeClass("votes"))},r=function(n,i){n=Roblox.NumberFormatting.abbreviatedFormat(n),i=Roblox.NumberFormatting.abbreviatedFormat(i),$(".voting-panel .total-upvotes-text").text(n),$(".voting-panel .total-downvotes-text").text(i),$(".voting-panel #vote-up-text").text(n),$(".voting-panel #vote-down-text").text(i),t(n,i)},u=function(n){if(n!==undefined&&n.length>0)switch(n){case"EmailIsVerified":Roblox.GenericConfirmation.open({titleText:Roblox.Voting.Resources.emailVerifiedTitle,bodyContent:Roblox.Voting.Resources.emailVerifiedMessage,onAccept:function(){window.location.href="/my/account?confirmemail=1"},acceptColor:Roblox.GenericConfirmation.blue,acceptText:Roblox.Voting.Resources.verify,declineText:Roblox.Voting.Resources.cancel,allowHtmlContentInBody:!0});return;case"PlayGame":Roblox.GenericModal.open(Roblox.Voting.Resources.playGameTitle,null,Roblox.Voting.Resources.playGameMessage);return;case"UseModel":Roblox.GenericModal.open(Roblox.Voting.Resources.useModelTitle,null,Roblox.Voting.Resources.useModelMessage);return;case"InstallPlugin":Roblox.GenericModal.open(Roblox.Voting.Resources.installPluginTitle,null,Roblox.Voting.Resources.installPluginMessage);return;case"BuyGamePass":Roblox.GenericModal.open(Roblox.Voting.Resources.buyGamePassTitle,null,Roblox.Voting.Resources.buyGamePassMessage);return;case"FloodCheckThresholdMet":Roblox.GenericModal.open(Roblox.Voting.Resources.floodCheckThresholdMetTitle,null,Roblox.Voting.Resources.floodCheckThresholdMetMessage);return;case"GuestUser":Roblox.GenericConfirmation.open({titleText:Roblox.Voting.Resources.guestUserTitle,bodyContent:Roblox.Voting.Resources.guestUserMessage,onAccept:function(){window.location.href=Roblox.Voting.Resources.returnUrl},acceptColor:Roblox.GenericConfirmation.blue,acceptText:Roblox.Voting.Resources.login,declineText:Roblox.Voting.Resources.decline,allowHtmlContentInBody:!0});return;case"AccountAgeOverOneDay":Roblox.GenericModal.open(Roblox.Voting.Resources.accountUnderOneDayTitle,null,Roblox.Voting.Resources.accountUnderOneDayMessage);return;default:Roblox.GenericModal.open(Roblox.Voting.Resources.unknownProblemTitle,null,Roblox.Voting.Resources.unknownProblemMessage);return}};return{Vote:n,Initialize:f,SetVotes:r}}();

;// Comments.js
var Roblox=Roblox||{};Roblox.Comments=function(){var u=!1,t="/",f=function(){n($("#AjaxCommentsContainer .rbx-comment-error"),"",!0,!0),e(),i(),t=$("#AjaxCommentsContainer").data("signin-url")},e=function(){$(".comment-form .rbx-post-comment").click(function(){var i=$(".comment-form .rbx-input-field").val();if(i.trim()!=""){if($("#AjaxCommentsContainer").attr("data-is-user-authenticated").toLowerCase()=="false"){Roblox.GenericConfirmation.open({titleText:"Login to Comment",bodyContent:"<div>You must login to comment.</div> <div>Please <a href='"+t+"'>login or register</a> to continue.</div>",onAccept:function(){window.location.href=t},acceptColor:Roblox.GenericConfirmation.blue,acceptText:"Login",declineText:"Cancel",allowHtmlContentInBody:!0});return}if(Roblox.Comments.FilterIsEnabled&&a(i)){Roblox.GenericModal.open(Roblox.Comments.Resources.linksNotAllowedTitle,"/images/Icons/img-alert.png",Roblox.Comments.Resources.linksNotAllowedMessage);return}Roblox.Comments.makeComment(),n($("#AjaxCommentsContainer .rbx-comment-error"),"",!0,!0)}});$(".comment-form .rbx-comment-input").on({focus:function(){$(this).attr("rows",3).removeClass("blur")},blur:function(){$(this).attr("rows",1).addClass("blur")}});$(".comment-form .rbx-comment-input").on("input propertychange",function(){var r=$(".comment-form .rbx-comment-input")[0],u=$("#AjaxCommentsContainer .rbx-comment-error"),i=Roblox.Comments.Limits,t;for(n(u,"",!0,!0),t=0;t<i.length;++t)v(r.value,i[t].limit,i[t].character)||(r.value=y(r.value,i[t].limit,i[t].character),n(u,i[t].message,!1)),typeof i[t].character=="undefined"&&l(r.value,i[t].limit)});$(".comments").on("click",".rbx-comment-remove",function(){elem=$(this),Roblox.Comments.deleteComment(elem.attr("data-comment-id")),elem.parents(".comment-item").remove()});$(".rbx-comments-see-more").on("click",function(){var n=$(".comments .comment-item").length;Roblox.Comments.getComments(n)});$(window).on("scroll resize",function(){Roblox.Comments.loadCommentsIfReady()})},i=function(){Roblox.Comments&&!Roblox.Comments.gotFirstComments&&Roblox.Comments.isCommentBlockInViewport()&&(Roblox.Comments.getComments(0),Roblox.Comments.gotFirstComments=!0)},o=function(){var i=$("#AjaxCommentsContainer"),r=$(window),n=r.scrollTop(),u=n+r.height(),t=i.offset().top,f=t+i.height();return t>=n&&t<=u||f>=n&&f<=u},r=function(n,t){var i=$(".comments-item-template").clone();return t&&(i.find(".comment-controls .rbx-comment-report-link").remove(),i.find(".comment-controls").append("<a class='rbx-comment-remove' data-comment-id='"+n.Id+"' title='Remove Comment'><span class='rbx-icon-remove'></span></a>")),i.find(".comment-item").attr("data-comment-id",n.Id),i.find(".comment-user .Avatar a").attr("title",n.AuthorName).attr("href","/User.aspx?id="+n.AuthorId),i.find(".comment-body strong").text(n.AuthorName),i.find(".comment-user .Avatar").addClass("roblox-avatar-image").attr("data-user-id",n.AuthorId).html(""),i.find(".comment-body span.rbx-text-notes").text(n.PostedDate),i.find(".comment-content").html(n.Text.replace(/\$/g,"&#36;")),i.find(),i=i.html(),i=i.replace("%CommentID",n.Id),i=i.replace("%PageURL",encodeURIComponent(window.location.href))},s=function(){$.ajax({type:"POST",url:"/API/Comments.ashx?rqtype=makeComment&assetID="+$("#AjaxCommentsContainer").attr("data-asset-id"),data:$(".comment-form .rbx-input-field").val(),contentType:"application/json; charset=utf-8",success:function(n){if(typeof n.ID!="undefined"){var t={Id:n.ID,PostedDate:n.Date,Text:n.Content,AuthorName:n.Author,AuthorId:n.AuthorID,AuthorThumbnail:{Url:""}};$(".comment-form .rbx-input-field").val(""),$(".comments").prepend(r(t,!1)),Roblox.require("Widgets.AvatarImage",function(n){n.populate()})}else typeof n.errormsg!="undefined"?h(n.errormsg):($(".comment-form .rbx-input-field").val(""),$(".comment-form .rbx-input-field").attr("placeholder",n),$("#AjaxCommentsContainer .rbx-comment-count").html(""))}})},h=function(n){n=="01"?Roblox.GenericConfirmation.open({titleText:Roblox.Comments.Resources.emailVerifiedABTitle,bodyContent:Roblox.Comments.Resources.emailVerifiedABMessage,onAccept:function(){window.location.href="/my/account?confirmemail=1"},acceptColor:Roblox.GenericConfirmation.blue,acceptText:Roblox.Comments.Resources.accept,declineText:Roblox.Comments.Resources.decline,allowHtmlContentInBody:!0}):($(".comment-form .rbx-input-field").val(""),$(".comment-form .rbx-input-field").attr("placeholder",n),$("#AjaxCommentsContainer .rbx-comment-count").html(""))},c=function(n){var i,t;n=n==undefined?0:n,i=$("#AjaxCommentsContainer").attr("data-asset-id"),t=$(".comments"),t.find(".empty,.more").remove(),t.append($('<div class="loading"></div>'));var u=Math.floor(Math.random()*9001),f=100,e=100,o="PNG";$.ajax({type:"GET",url:"/comments/get-json",data:{assetId:i,startindex:n,thumbnailWidth:f,thumbnailHeight:e,thumbnailFormat:o,cachebuster:u},contentType:"application/json; charset=utf-8",success:function(i){var u=i.Comments,o=i.MaxRows,f=$(".rbx-comments-see-more"),e;t.find(".loading,.empty,.more").remove();for(e in u)t.append(r(u[e],i.IsUserModerator));!u||u.length<o?f.addClass("hidden"):f.removeClass("hidden"),u&&(u.length!=0||n!=0)||t.append($('<div class="empty">'+Roblox.Comments.Resources.noCommentsFound+"</div>")),Roblox.require("Widgets.AvatarImage",function(n){n.populate()})},error:function(){$(".comments").find(".loading,.empty,.more").remove().append($('<div class="empty">'+Roblox.Comments.Resources.sorrySomethingWentWrong+"</div>"))}})},l=function(n,t){$("#AjaxCommentsContainer .rbx-comment-count").html(Math.max(0,Math.min(t,t-n.length))+Roblox.Comments.Resources.charactersRemaining)},a=function(n){return new RegExp(Roblox.Comments.FilterRegex).test(n.replace(/(\r\n|\n|\r|<br\/>)/gm,""))?!0:!1},n=function(n,t,i,r){r=typeof r=="undefined"?!1:r,i=typeof i=="undefined"?!0:i,r&&n.empty(),n.append(t+" "),i?n.hide():n.show()},v=function(n,t,i){if(i=typeof i=="undefined"?"":i,i!==""){var r=n.split(i).length-1;return r<=t}return n.length<=t},y=function(n,t,i){if(i=typeof i=="undefined"?"":i,i!==""){var f=n.split(i),e=f.length,u="",r;if(e>t)for(r=0;r<e;++r)u+=f[r],r<t&&(u+=i);n=u}else n=n.substr(0,t);return n},p=function(n){$.ajax({type:"POST",url:"/API/Comments.ashx?rqtype=deleteComment&commentID="+n,contentType:"application/json; charset=utf-8",success:function(){$(".comments [data-comment-id="+n+"]").parents(".comment-item")},error:function(){}})};return{initialize:f,getComments:c,makeComment:s,deleteComment:p,gotFirstComments:u,isCommentBlockInViewport:o,loadCommentsIfReady:i}}();

;// Leaderboards/Leaderboard.js
"use strict";var Roblox=Roblox||{};Roblox.Leaderboard=function(){function s(n){var i=$(n.find(".rbx-leaderboard-filter")),t;i.on("click",".rbx-dropdown-menu a",{leaderboard:n},function(t){var i=$(this).attr("data-time-filter"),r=t.data.leaderboard;n.find(".rbx-leaderboard-data").attr("data-time-filter",i),n.find(".rbx-leaderboard-filtername").text($(this).text()),$('[data-toggle="popover"]').popover("hide"),u(n),e(n)});t=$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more");t.on("click",function(){Roblox.Leaderboard.getMoreItems(n)})}function t(n,t){var i=n.find(".rbx-leaderboard-item-template").clone(),o=t.DisplayRank,r=t.ProfileUri,e=t.UserImageUri,u=t.Name,f=t.ClanName!=null?t.ClanName:"",s=t.DisplayPoints;return n.hasClass("rbx-leaderboard-clan")&&(u=t.ClanName,f=t.Name,e=t.ClanImageUri,r=t.ClanUri),i.find(".rank").text(o),i.find(".avatar").html("<a href='"+r+"'><img src='"+e+"'/></a>"),i.find(".name-and-group").html("<a href='"+r+"'><span class='name rbx-text-overflow' title='"+u+"'>"+u+"</span></a><span class='group rbx-text-overflow' title='"+f+"'>"+f+"</span>"),i.find(".points").text(s),i=i.html()}function i(n,t){return $("<div class='rbx-leaderboard-notification'><p>"+t+"</p></div>")}function e(n){var u=n.find(".rbx-leaderboard-data"),f=n.find(".rbx-leaderboard-my"),h=u.attr("data-distributor-target-id"),e=u.attr("data-target-type"),c=u.attr("data-time-filter"),l=u.attr("data-rank-max"),o=u.attr("data-player-id"),s=u.attr("data-clan-id"),a=48,v=48,y="PNG";$.ajax({type:"GET",url:"/leaderboards/rank/json",data:{targetType:e,distributorTargetId:h,timeFilter:c,startIndex:0,currentRank:1,previousPoints:-1,max:l,imgWidth:a,imgHeight:v,imgFormat:y},contentType:"application/json; charset=utf-8",success:function(i){var r,u;if(f.find(".rbx-leaderboard-item, .rbx-leaderboard-notification").remove(),i.length>0){if(e===0&&o!==-1)for(r=0;r<i.length;r++)if(i[r].UserId===o){f.html(t(n,i[r])),n.addClass("rbx-has-rank");break}if(e===1&&s!=-1)for(u=0;u<i.length;u++)if(i[u].TargetId===s){f.html(t(n,i[u])),n.addClass("rbx-has-rank");break}}},error:function(){f.find(".rbx-leaderboard-item").remove(),f.append(i(n,r))}})}function u(u){var e=u.find(".rbx-leaderboard-data"),f=u.find(".rbx-leaderboard-items"),h=e.attr("data-distributor-target-id"),s=e.attr("data-target-type"),c=e.attr("data-time-filter"),l=e.attr("data-max"),a=48,v=48,y="PNG";$.ajax({type:"GET",url:"/leaderboards/game/json",data:{targetType:s,distributorTargetId:h,timeFilter:c,startIndex:0,currentRank:1,previousPoints:n[s],max:l,imgWidth:a,imgHeight:v,imgFormat:y},contentType:"application/json; charset=utf-8",success:function(r){f.find(".rbx-leaderboard-item, .rbx-leaderboard-notification").remove();for(var e in r)f.append(t(u,r[e]));r.length===0?(f.append(i(u,o)),Roblox.Leaderboard.toggleMore(u,"off")):(Roblox.Leaderboard.toggleMore(u,"on"),n[s]=r[r.length-1].Points)},error:function(){f.find(".rbx-leaderboard-item").remove(),f.append(i(u,r))}})}function h(n,t){t=="on"?$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more").removeClass("hidden"):$("."+n.attr("data-associated-leaderboard-more")).find(".rbx-leaderboard-see-more").addClass("hidden")}function c(u){var f=u.find(".rbx-leaderboard-data"),e=u.find(".rbx-leaderboard-items"),h=u.find(".rbx-leaderboard-item"),l=f.attr("data-distributor-target-id"),o=f.attr("data-target-type"),a=f.attr("data-time-filter"),v=f.attr("data-max"),y=48,p=48,w="PNG",b=u.find(".rbx-leaderboard-items .rbx-leaderboard-item").length,c=1,s;h&&(s=h.last().find(".rank"),s&&(c=parseInt(s.text(),10))),$.ajax({type:"GET",url:"/leaderboards/game/json",data:{targetType:o,distributorTargetId:l,timeFilter:a,startIndex:b,currentRank:c,previousPoints:n[o],max:v,imgWidth:y,imgHeight:p,imgFormat:w},contentType:"application/json; charset=utf-8",success:function(i){for(var r in i)e.append(t(u,i[r]));i.length==0?Roblox.Leaderboard.toggleMore(u,"off"):(Roblox.Leaderboard.toggleMore(u,"on"),n[o]=i[i.length-1].Points)},error:function(){e.find(".rbx-leaderboard-item").remove(),e.append(i(u,r)),Roblox.Leaderboard.toggleMore(u,"off")}})}function l(){if(!(f>0)){f+=1;var n=[];$("#rbx-leaderboard-container-player, #rbx-leaderboard-container-clan").each(function(t,i){n[t]=$(i),u(n[t]),e(n[t]),s(n[t])})}}var a={Users:0,Clans:1},v={TopLeaders:0,MyRank:1},y={AllTime:3,LastDay:0,LastWeek:1,LastMonth:2},r="Error loading rows.",p="You are not yet ranked for this time period. Go earn some Points!",o="No results found.",f=0,n=[-1,-1];return{init:l,getItems:u,getMoreItems:c,toggleMore:h}}();

;// PlaceProductPromotion.js
var Roblox=Roblox||{};Roblox.PlaceProductPromotion=function(){function n(n){return n.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val(),n}function i(n,t){var i=Math.floor(Math.random()*9001);$.ajax({type:"GET",url:"/Games/GetPlaceProductPromotions?placeId="+Roblox.PlaceProductPromotion.PlaceID+"&startIndex="+n+"&maxRows="+t+"&cachebuster="+i,contentType:"application/json; charset=utf-8",success:function(n){Roblox.PlaceProductPromotionPager.update(n)},error:function(){$("#PromotionsItemContainer").addClass("empty").text(Roblox.PlaceProductPromotion.Resources.anErrorOccurred)}})}function r(){function i(n){return n.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val(),n}var t=$("#product-promo-place").val(),n;$(".PromoteModalErrorMessage").hide(),n=$("#PlaceProductPromotionSelectionPanel"),$.ajax({type:"POST",url:"/Games/AddProductPromotionToPlace?placeId="+t+"&productId="+Roblox.PlaceProductPromotionData.ProductID,data:i({}),dataType:"json",success:function(t){if(t.ErrorMsg)n.find(".PromoteModalErrorMessage").text(t.ErrorMsg).show();else{var i=$("<div>"+Roblox.PlaceProductPromotion.Resources.youhaveAdded+"<span></span>"+Roblox.PlaceProductPromotion.Resources.toYourGame+"<a></a>.</div>");i.find("span").html(Roblox.PlaceProductPromotionData.ProductName),i.find("a").attr("href",t.PlaceURL).text(t.PlaceName),n.find(".roblox-item-image").html("").addClass("thumbs-up-green"),n.find(".PurchaseModalMessageText").html(i).addClass("SuccessMsg"),n.find(".PurchaseModalButtonContainer .promoteBtn").hide(),n.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),n.find(".PurchaseModalFooter").text(""),n.find(".PurchaseModalButtonContainer .btn-negative").removeClass("btn-negative").addClass("btn-neutral").html(Roblox.PlaceProductPromotion.Resources.ok)}},error:function(n){$(".PromoteModalErrorMessage").text(n.ErrorMsg).show()}})}function u(t){var i=$("#DeleteProductPromotionModal");$.ajax({type:"POST",url:"/Games/DeletePlaceProductPromotion?promotionId="+t,data:n({}),success:function(){var r=$('.DeleteProductPromotion[data-delete-promotion-id="'+t+'"]').parent().find(".NameDiv").html();i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),i.find(".PurchaseModalMessageText").html(Roblox.PlaceProductPromotion.Resources.youhaveRemoved+"<a>"+r+"</a>"+Roblox.PlaceProductPromotion.Resources.fromYourGame),i.modal(Roblox.PlaceProductPromotion.modalProperties),Roblox.PlaceProductPromotionPager.getItemsPaged(1,3)},error:function(){i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.error),i.find(".PurchaseModalMessageText").text(Roblox.PlaceProductPromotion.Resources.sorryWeCouldnt),i.modal(Roblox.PlaceProductPromotion.modalProperties)}})}function f(t){var i=$("#DeleteProductPromotionModal");$.ajax({type:"POST",url:"/Games/DeletePlaceProductPromotion?promotionId="+t,data:n({}),success:function(){var r=$('.rbx-icon-delete[data-delete-promotion-id="'+t+'"]'),u=r.attr("data-delete-promotion-name");i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.success),i.find(".PurchaseModalMessageText").html(Roblox.PlaceProductPromotion.Resources.youhaveRemoved+"<a>"+u+"</a>"+Roblox.PlaceProductPromotion.Resources.fromYourGame),i.modal(Roblox.PlaceProductPromotion.modalProperties),r.parents(".list-item").hide()},error:function(){i.find(".titleBar").text(Roblox.PlaceProductPromotion.Resources.error),i.find(".PurchaseModalMessageText").text(Roblox.PlaceProductPromotion.Resources.sorryWeCouldnt),i.modal(Roblox.PlaceProductPromotion.modalProperties)}})}function e(n){if(n.length==0&&$("#PromotionsItemContainer .PlaceProductPromotionItem").length==0){$("#PromotionsItemContainer").addClass("empty").html($(".PromotionsItemContainer.empty").html());return}var t=$(".PlaceProductPromotionItem.template").clone().removeClass("template");return t.find(".ItemURL").attr("href",n.ItemUrl).html(fitStringToWidthSafe(n.Name,185)),t.find(".TotalSales").text(n.TotalSales),t.find(".DeleteProductPromotion").attr("data-delete-promotion-id",n.PromotionID),n.PriceInRobux!=undefined?(t.find(".Price").text(n.PriceInRobux),t.find(".PurchaseButton").attr("data-expected-price",n.PriceInRobux).attr("data-promotion-id",n.PromotionID)):n.PriceInTickets!=undefined?(t.find(".Price").removeClass("robux").addClass("tickets").text(n.PriceInTickets),t.find(".PurchaseButton").attr("data-expected-currency",2).removeAttr("data-promotion-id").attr("data-expected-price",n.PriceInTickets).removeAttr("data-placeproductpromotion-id")):t.find(".Price").remove(),n.IsForSale||(t.find(".PurchaseButton").hide(),t.find(".UserOwns").html(Roblox.PlaceProductPromotion.Resources.notForSale).show()),t.find(".PurchaseButton").attr("data-expected-seller-id",n.SellerID).attr("data-seller-name",n.SellerName).attr("data-item-name",n.Name),n.UserOwns===!0&&(t.find(".PurchaseButton").hide(),t.find(".UserOwns").show()),n.IsRentable===!0&&t.find(".PurchaseButton").html(Roblox.PlaceProductPromotion.Resources.rent),t.find("[data-bc-requirement]").attr("data-bc-requirement",n.BCRequirement),t.find("[data-item-id]").attr("data-item-id",n.AssetID),t.find("[data-product-id]").attr("data-product-id",n.ProductID),t.find("[data-placeproductpromotion-id]").attr("data-placeproductpromotion-id",n.PromotionID),t}function o(n){var i=$(".PlaceProductPromotionItem .roblox-item-image[data-item-id="+n.AssetID+"]").parent(),r=i.find(".roblox-item-image"),t;Roblox.require("Widgets.ItemImage",function(n){n.load(r)}),t=i.find(".PurchaseButton"),t.unbind(),t.click(function(){return Roblox.PlaceProductPromotionItemPurchase.openPurchaseVerificationView(t[0]),!1}),i.find(".DeleteProductPromotion").click(function(){var n=$(this).data("delete-promotion-id");Roblox.PlaceProductPromotion.DeleteProductPromotion(n)})}function s(){$("#product-promo-group").change(function(){var n=this.value;$("#product-promo-place").load("/Games/ProductPromotionPlaceDropDown?groupId="+n)}),$(".promoteBtn").click(function(){return Roblox.PlaceProductPromotion.AddPlaceProductPromotion(),!1}),$(".PromoteModalBtn").click(function(){var n={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};$("#PlaceProductPromotionSelectionPanel").modal(n),Roblox.require("Widgets.ItemImage",function(n){n.populate($("#PlaceProductPromotionSelectionPanel .roblox-item-image"))})})}var h,t={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};return{GetPlacePromotions:i,FormatPlacePromotion:e,FormatPlacePromotionCallback:o,DeleteProductPromotion:u,modalProperties:t,AddPlaceProductPromotion:r,SetUpAddPlaceProductPromotion:s,DeleteGear:f}}();

;// GamePass.js
var Roblox=Roblox||{};Roblox.GamePass=function(){function n(n){var t,i,r;if(n.length==0)$(".GamePassesDisplayContainer").hasClass("OwnerIsViewing")?($("#GamePassesItemContainer").text(Roblox.GamePass.Resources.noneforSale),$("#GamePassesPagerContainer").hide()):$(".GamePassesDisplayContainer").hide();else return t=$(".GamePasses.PlacePagePagersItem.template").clone().removeClass("template"),t.find(".ItemURL").attr("href",n.PassItemURL).text(fitStringToWidthSafeText(n.PassName,100)),t.find(".TotalSales").text(n.TotalSales),t.find("[data-item-purchase-enabled=False]").css("display","block"),i=t.find(".PurchaseButton"),n.PriceInTickets>0&&(i.attr("data-expected-currency",2).attr("data-expected-price",n.PriceInTickets),t.find(".Price.tickets").text(n.PriceInTickets).show()),n.PriceInRobux>0&&(i.attr("data-expected-currency",1).attr("data-expected-price",n.PriceInRobux),t.find(".Price.robux").text(n.PriceInRobux).show()),n.PriceInRobux==0&&n.PriceInTickets==0&&(i.attr("data-expected-currency",1).attr("data-expected-price",0),t.find(".Price.robux-text").text("FREE").show()),n.PriceInTickets>0&&n.PriceInRobux>0&&t.find("input").attr("name","currency_"+n.PassID).show(),i.attr("data-expected-price",r).attr("data-item-name",n.PassName),n.UserOwns===!0&&(t.find(".PurchaseButton").hide(),t.find("input").attr("name","currency_"+n.PassID).hide(),t.find(".UserOwns").show()),t.find("[data-item-id]").attr("data-item-id",n.PassID),t.find("[data-product-id]").attr("data-product-id",n.ProductID),t}function t(n,t){placeId=Roblox.GamePassJSData.PlaceID;var i=Math.floor(Math.random()*9001);$.ajax({type:"GET",url:"/Games/GetGamePassesPaged?placeId="+placeId+"&startIndex="+n+"&maxRows="+t+"&cachebuster="+i,contentType:"application/json; charset=utf-8",success:function(n){Roblox.GamePassesPager.update(n)},error:function(){$("#GamePassesItemContainer").addClass("empty").text(anErrorOccurred)}})}function i(n){var i=$(".GamePasses.PlacePagePagersItem .roblox-item-image[data-item-id="+n.PassID+"]"),t;Roblox.require("Widgets.ItemImage",function(n){n.load(i)}),t=$(".GamePasses.PlacePagePagersItem .PurchaseButton[data-item-id="+n.PassID+"]"),t.click(function(){return Roblox.GamePassItemPurchase.openPurchaseVerificationView(t[0]),!1}),$(".GamePasses.PlacePagePagersItem input:radio").change(function(n){var i=$(n.target),t=i.parents(".InfoContainer");i.hasClass("robux")?t.find(".PurchaseButton").attr("data-expected-currency",1).attr("data-expected-price",t.find(".Price.robux").text()):t.find(".PurchaseButton").attr("data-expected-currency",2).attr("data-expected-price",t.find(".Price.tickets").text())})}return{getGamePasses:t,formatGamePassHTML:n,FormatGamePassCallback:i}}(),Roblox.GamePass.Resources={noneforSale:"None of your game passes are currently for sale.",anErrorOccurred:"An error occurred, please try again."};

;// ItemPurchase.js
var Roblox=Roblox||{};Roblox.ItemPurchase=function(n,t){function f(n){n+="";for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u}function w(n){return n<1?n+"":n<1e4?f(n):n>=1e6?Math.floor(n/1e6)+"M+":Math.floor(n/1e3)+"K+"}function s(){window.location.href="/login/Default.aspx?ReturnUrl="+encodeURIComponent(location.pathname+location.search)}function h(n){var t={overlayClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}};typeof n!="undefined"&&n!==""&&$.modal.close("."+n),$("#ProcessingView").modal(t)}function e(n,i){var u=$(n),v;if(u.attr("data-modal-field-validation-required")==="true"&&(i=""),h(i),!u.hasClass("btn-disabled-primary")){var o=u.attr("data-product-id"),s=parseInt(u.attr("data-expected-price")),l=u.attr("data-expected-currency"),f=u.attr("data-placeproductpromotion-id"),a=u.attr("data-expected-seller-id"),e=u.attr("data-userasset-id");if(t)return t({productId:o,expectedPrice:s,expectedCurrency:l,expectedPromoId:f,expectedSellerId:a,userAssetId:e});v="/API/Item.ashx?rqtype=purchase&productID="+o+"&expectedCurrency="+l+"&expectedPrice="+s+(f===undefined?"":"&expectedPromoID="+f)+"&expectedSellerID="+a+(e===undefined?"":"&userAssetID="+e),$.ajax({type:"POST",url:v,contentType:"application/json; charset=utf-8",success:function(n){n.statusCode==500?($.modal.close(".ProcessingView"),r(n)):($.modal.close(".ProcessingView"),c(n))},error:function(n){$.modal.close(".ProcessingView");var t=$.parseJSON(n.responseText);r(t)}})}}function r(n){var t,f;if(n.showDivID==="TransactionFailureView")Roblox.GenericConfirmation.open({titleText:n.title,bodyContent:n.errorMsg,imageUrl:o,acceptText:Roblox.ItemPurchase.strings.okText,declineColor:Roblox.GenericConfirmation.none,dismissable:!0});else if(n.showDivID==="InsufficientFundsView"){var i="",r="",u=!1;i=n.currentCurrency==1?Roblox.ItemPurchase.strings.buyText+" Robux":Roblox.ItemPurchase.strings.tradeCurrencyText,n.currentCurrency==1&&(u=!0,r=Roblox.ItemPurchase.strings.orText+" <a href='/My/Money.aspx?tab=TradeCurrency' style='font-weight:bold'>"+Roblox.ItemPurchase.strings.tradeCurrencyText+"</a>"),Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.insufficientFundsTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.insufficientFundsText,"<span class='currency-color CurrencyColor"+n.currentCurrency+"'>"+n.shortfallPrice+"</span>"),acceptText:i,acceptColor:Roblox.GenericConfirmation.green,onAccept:function(){window.location=n.currentCurrency==1?"/Upgrades/Robux.aspx?ctx="+n.source:"/My/Money.aspx?tab=TradeCurrency"},declineText:Roblox.ItemPurchase.strings.cancelText,imageUrl:o,footerText:r,allowHtmlContentInBody:!0,allowHtmlContentInFooter:u,dismissable:!0})}else n.showDivID==="PriceChangedView"&&(t="targetSelector"in n?$(n.targetSelector):$(".PurchaseButton[data-item-id="+n.AssetID+"][data-expected-currency="+n.expectedCurrency+"][data-expected-price="+n.expectedPrice+"]"),f=function(){t.attr("data-expected-price",n.currentPrice),t.attr("data-expected-currency",n.currentCurrency),e(t,"PurchaseVerificationView")},Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.priceChangeTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.priceChangeText,"<span class='currency-color CurrencyColor"+n.expectedCurrency+"'>"+n.expectedPrice+"</span>","<span class='currency-color CurrencyColor"+n.currentCurrency+"'>"+n.currentPrice+"</span>"),acceptText:Roblox.ItemPurchase.strings.buyNowText,acceptColor:Roblox.GenericConfirmation.green,onAccept:f,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:String.format(Roblox.ItemPurchase.strings.balanceText,(n.currentCurrency==1?"R$":"Tx")+n.balanceAfterSale),allowHtmlContentInBody:!0,dismissable:!0}))}function v(n,t){var i,st,tt,it,d,g,ft,ut,c,h,rt,o,v,ct;if(t=typeof t!="undefined"?t:"item",i=$(n),!i.hasClass("btn-disabled-primary")){if(y){r({showDivID:"TransactionFailureView",title:"Error",errorMsg:p});return}if(st=i.attr("data-bc-requirement"),st>a){showBCOnlyModal("BCOnlyModal");return}var vt=i.attr("data-item-name").escapeHTML(),nt=parseInt(i.attr("data-expected-price")),w=i.attr("data-expected-currency"),at=i.attr("data-seller-name"),ot=i.attr("data-asset-type"),lt=i.attr("data-item-id"),ht=$("#ItemPurchaseAjaxData").attr("data-footer-text"),et=ht==null?"":ht;if($("#ItemPurchaseAjaxData").attr("data-footer-text",null),u=ot=="Place",b==="True"){s();return}if(tt=!1,i.hasClass("rentable")&&(tt=!0),it=w=="1"?parseInt(k):parseInt(l),d=it-nt,g="",g=tt?Roblox.ItemPurchase.strings.rentText:Roblox.ItemPurchase.strings.buyTextLower,d<0){ft={shortfallPrice:0-d,currentCurrency:w,showDivID:"InsufficientFundsView",isPlace:u,source:t},r(ft);return}ut=$("#ItemPurchaseAjaxData").attr("data-imageurl"),c="",c=nt==0?"<span class='currency CurrencyColorFree'>"+Roblox.ItemPurchase.strings.freeText+"</span>":"<span class='currency CurrencyColor"+w+"'>"+nt+"</span>",h="",h=w=="1"?"R$":"Tx",h+=f(d),rt=function(){return e(n,"PurchaseVerificationView")},o=i.attr("data-purchase-title-text"),o=o?o:Roblox.ItemPurchase.strings.buyItemTitle,v=i.attr("data-purchase-body-content"),v=v?String.format(v,c):String.format(Roblox.ItemPurchase.strings.buyItemText,g,vt,ot,at,c,u?Roblox.ItemPurchase.strings.accessText:""),ct=i.attr("data-modal-field-validation-required")==="true",Roblox.GenericConfirmation.open({titleText:o,bodyContent:v,imageUrl:ut,acceptText:u?Roblox.ItemPurchase.strings.buyAccessText:Roblox.ItemPurchase.strings.buyNowText,acceptColor:Roblox.GenericConfirmation.green,onAccept:rt,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:String.format(et.length==0?Roblox.ItemPurchase.strings.balanceText:et,h),allowHtmlContentInBody:!0,dismissable:!0,fieldValidationRequired:ct,onOpenCallback:function(){$(".ConfirmationModal .roblox-item-image").html("").attr("data-item-id",lt),Roblox.require("Widgets.ItemImage",function(n){n.load($(".ConfirmationModal .roblox-item-image"))})}})}}function c(t){var i;i=t.Price==0?"<span class='currency CurrencyColorFree'>"+Roblox.ItemPurchase.strings.freeText+"</span>":"<span class='currency CurrencyColor"+t.Currency+"'>"+t.Price+"</span>";var e=$("#ItemPurchaseAjaxData").attr("data-imageurl"),o=function(){var n=$("#ItemPurchaseAjaxData").attr("data-continueshopping-url");n!=undefined&&n!=""&&(document.location.href=n)},r=!1,f="";t.AssetIsWearable&&(f="<a class='CustomizeCharacterLink' href='/My/Character.aspx'>"+Roblox.ItemPurchase.strings.customizeCharacterText+"</a>",r=!0),Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.purchaseCompleteTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.purchaseCompleteText,t.TransactionVerb,t.AssetName,t.AssetType,t.SellerName,i,u?Roblox.ItemPurchase.strings.accessText:""),imageUrl:e,acceptText:Roblox.ItemPurchase.strings.continueShoppingText,xToCancel:!0,onAccept:o,onCancel:function(){t.IsMultiPrivateSale&&window.location.reload()},declineColor:Roblox.GenericConfirmation.none,footerText:f,allowHtmlContentInBody:!0,allowHtmlContentInFooter:r,dismissable:!0,onOpenCallback:function(){$(".ConfirmationModal .roblox-item-image").html("").attr("data-item-id",t.AssetID),Roblox.require("Widgets.ItemImage",function(n){n.load($(".ConfirmationModal .roblox-item-image"))})}}),n(t)}if(!(this instanceof Roblox.ItemPurchase))return new Roblox.ItemPurchase(n,t);t=typeof t=="undefined"?!1:t;var i=$("#ItemPurchaseAjaxData"),b=i.attr("data-authenticateduser-isnull"),k=i.attr("data-user-balance-robux"),l=i.attr("data-user-balance-tickets"),a=i.attr("data-user-bc"),o=i.attr("data-alerturl"),d=i.attr("data-builderscluburl"),u=!1,y=i.attr("data-has-currency-service-error")==="True",p=i.attr("data-currency-service-error-message");return{showProcessingModal:h,purchaseItem:e,openPurchaseVerificationView:v,openPurchaseConfirmationView:c,redirectToLogin:s,purchaseConfirmationCallback:n,openErrorView:r,addCommasToMoney:f,formatMoney:w}},Roblox.ItemPurchase.ModalClose=function(n){$.modal.close("."+n)},Roblox.ItemPurchase.strings={insufficientFundsTitle:"Insufficient Funds",insufficientFundsText:"You need {0} more to purchase this item.",cancelText:"Cancel",okText:"OK",buyText:"Buy",buyTextLower:"buy",tradeCurrencyText:"Trade Currency",priceChangeTitle:"Item Price Has Changed",priceChangeText:"While you were shopping, the price of this item changed from {0} to {1}.",buyNowText:"Buy Now",buyAccessText:"Buy Access",buildersClubOnlyTitle:"{0} Only",buildersClubOnlyText:"You need {0} to buy this item!",buyItemTitle:"Buy Item",buyItemText:"Would you like to {0} {5}the {1} {2} from {3} for {4}?",balanceText:"Your balance after this transaction will be {0}",freeText:"Free",purchaseCompleteTitle:"Purchase Complete!",purchaseCompleteText:"You have successfully {0} {5}the {1} {2} from {3} for {4}.",continueShoppingText:"Continue",customizeCharacterText:"Customize Character",orText:"or",rentText:"rent",accessText:"access to "};

;// jquery.history.js
typeof window.console=="undefined"&&(window.console={}),typeof window.console.emulated=="undefined"&&(typeof window.console.log=="function"?window.console.hasLog=!0:(typeof window.console.log=="undefined"&&(window.console.log=function(){}),window.console.hasLog=!1),typeof window.console.debug=="function"?window.console.hasDebug=!0:(typeof window.console.debug=="undefined"&&(window.console.debug=window.console.hasLog?function(){for(var t=["console.debug:"],n=0;n<arguments.length;n++)t.push(arguments[n]);window.console.log.apply(window.console,t)}:function(){}),window.console.hasDebug=!1),typeof window.console.warn=="function"?window.console.hasWarn=!0:(typeof window.console.warn=="undefined"&&(window.console.warn=window.console.hasLog?function(){for(var t=["console.warn:"],n=0;n<arguments.length;n++)t.push(arguments[n]);window.console.log.apply(window.console,t)}:function(){}),window.console.hasWarn=!1),typeof window.console.error=="function"?window.console.hasError=!0:(typeof window.console.error=="undefined"&&(window.console.error=function(){var t="An error has occured.",i,n;if(window.console.hasLog){for(i=["console.error:"],n=0;n<arguments.length;n++)i.push(arguments[n]);window.console.log.apply(window.console,i),t="An error has occured. More information is available in your browser's javascript console."}for(n=0;n<arguments.length;++n){if(typeof arguments[n]!="string")break;t+="\n"+arguments[n]}if(typeof Error!="undefined")throw new Error(t);else throw t;}),window.console.hasError=!1),typeof window.console.trace=="function"?window.console.hasTrace=!0:(typeof window.console.trace=="undefined"&&(window.console.trace=function(){window.console.error("console.trace does not exist")}),window.console.hasTrace=!1),window.console.emulated=!0),function(n){n.History||!1?window.console.warn("$.History has already been defined..."):(n.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(n){return n.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"")},getState:function(){var t=n.History;return t.state},setState:function(t){var i=n.History;return t=i.extractHash(t),i.state=t},getHash:function(){var t=n.History;return t.extractHash(window.location.hash||location.hash)},setHash:function(t){var i=n.History;return t=i.extractHash(t),typeof window.location.hash!="undefined"?window.location.hash!==t&&(window.location.hash=t):location.hash!==t&&(location.hash=t),t},go:function(t){var i=n.History,r,u;return t=i.extractHash(t),r=i.getHash(),u=i.getState(),t!==r?i.setHash(t):(t!==u&&i.setState(t),i.trigger()),!0},hashchange:function(){var i=n.History,r=i.getHash();return i.go(r),!0},bind:function(t,i){var r=n.History;return i?(typeof r.handlers.specific[t]=="undefined"&&(r.handlers.specific[t]=[]),r.handlers.specific[t].push(i)):(i=t,r.handlers.generic.push(i)),!0},trigger:function(t){var u=n.History,i,f,e,r;if(typeof t=="undefined"&&(t=u.getState()),typeof u.handlers.specific[t]!="undefined")for(r=u.handlers.specific[t],i=0,f=r.length;i<f;++i)e=r[i],e(t);for(r=u.handlers.generic,i=0,f=r.length;i<f;++i)e=r[i],e(t);return!0},construct:function(){var t=n.History;return n(document).ready(function(){t.domReady()}),!0},configure:function(t){var i=n.History;return i.options=n.extend(i.options,t),!0},domReadied:!1,domReady:function(){var t=n.History;if(!t.domRedied)return t.domRedied=!0,t.$window=n(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},nativeSupport:function(t){t=t||n.browser;var e=t.version,o=parseInt(e,10),u=e.split(/[^0-9]/g),r=parseInt(u[0],10),f=parseInt(u[1],10),s=parseInt(u[2],10),i=!1;return(t.msie||!1)&&o>=8?i=!0:(t.webkit||!1)&&o>=528?i=!0:t.mozilla||!1?r>1?i=!0:r===1&&(f>9?i=!0:f===9&&s>=2&&(i=!0)):(t.opera||!1)&&(r>10?i=!0:r===10&&f>=60&&(i=!0)),i},hashchangeLoader:function(){var t=n.History,f=t.nativeSupport(),r,i,u;return f?(u=t.getHash(),u&&t.$window.trigger("hashchange")):(n.browser.msie?(t.$iframe=n('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),i=!1,r=function(){var n=t.getHash(),r=t.getState(),u=t.extractHash(t.$iframe.contentWindow.document.location.hash);r!==n?(i||(t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),t.$iframe.contentWindow.document.location.hash=n),i=!1,t.$window.trigger("hashchange")):r!==u&&(i=!0,t.setHash(u))}):r=function(){var n=t.getHash(),i=t.getState();i!==n&&t.$window.trigger("hashchange")},setInterval(r,200)),!0}},n.History.construct())}(jQuery);

;// utilities/robloxTabs.js
$(function(){$.History.bind(function(n){var t="#"+n.substring(2);$(".rbx-tab a").each(function(){$(this).attr("href")==t&&$(this).click()})});var n=".rbx-tab";$(n).click(function(n){if(n.hasOwnProperty("originalEvent")){var t="!/"+$(this).find("a").attr("href").substring(1);$.History.go(t)}})});

;// Games/GameDetailReferral.js
Roblox=Roblox||{},Roblox.GameDetailReferral=Roblox.GameDetailReferral||{},Roblox.GameDetailReferral.AppendUrl=function(n,t,i){if(!n.data("modified")){var e=$(t).length,u=i||n,f=u.attr("href"),r=f;r+=f.indexOf("?")!==-1?"&":"?",r+="LocalTimestamp="+ +new Date+"&TotalInSort="+e,u.attr("href",r),n.data("modified",!0)}},$(function(){$("#recently-visited-places").on("mousedown",".game-item",function(){Roblox.GameDetailReferral.AppendUrl($(this),"#recently-visited-places .list-item")});$("#my-favorties-games").on("mousedown",".game-item",function(){Roblox.GameDetailReferral.AppendUrl($(this),"#my-favorties-games .game-item")});$("#UserPlaces div.Thumbnail").on("mousedown",function(){Roblox.GameDetailReferral.AppendUrl($(this),".Thumbnail",$(this).find("a"))});$("#GamesListsContainer").on("mousedown",".game-item",function(){var n=$(this).find(".game-item-anchor"),t=$(this).siblings().length+1;Roblox.GameDetailReferral.AppendUrl(n,new Array(t))});$(".container-main #GamesListsContainer").on("mousedown",".game-item",function(){var n=$(this),t=$(this).parent().siblings().length+1;Roblox.GameDetailReferral.AppendUrl(n,new Array(t))});$("#my-recommended-games").on("mousedown",".game-item",function(){Roblox.GameDetailReferral.AppendUrl($(this),"#my-recommended-games .game-item")});$("#HomeContainer #FeaturedGamesContainer").on("mousedown",".item-place a",function(){Roblox.GameDetailReferral.AppendUrl($(this),"#FeaturedGamesContainer .item-place")})});

;// Game/GameDetailsInteractionEvents.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.GameDetailsInteractionEvents=="undefined"&&(Roblox.GameDetailsInteractionEvents=function(){var i=!1,t,r=function(){return{pid:t}},n=function(n){Roblox.EventStream&&Roblox.EventStream.SendEvent("gameDetailsTabInteraction",n,r(t))},u=function(){n("about")},f=function(){n("store")},e=function(){n("leaderboards")},o=function(){n("gameInstances")},s=function(){i||(i=!0,t=$(".rbx-tabs-horizontal").data("place-id"),$("#tab-about").mousedown(u),$("#tab-store").mousedown(f),$("#tab-leaderboards").mousedown(e),$("#tab-game-instances").mousedown(o))};return{Init:s}}()),$(function(){Roblox.GameDetailsInteractionEvents.Init()});

;// PrivateServers/LinkJoin.js
var Roblox=Roblox||{};Roblox.PrivateServerLinkJoin=function(){var n,t=function(t){n=t},i=function(){typeof n=="function"&&n()};return{init:t,execute:i}}();

;// utilities/robloxAds.js
var Roblox=Roblox||{};Roblox.AdsHelper=Roblox.AdsHelper||{},Roblox.AdsHelper.AdRefresher=function(){var i=[],y="Skyscraper-Adp-Left",s="Skyscraper-Adp-Right",p="Leaderboard-Abp",n=$("#"+y),t=$("#"+s),h=$("#"+p),c=20,l=970,d=160,ut=728,rt=100,it=16,g=$("[data-max-width-for-two-ads]").attr("data-max-width-for-two-ads")||l+d*2+48-c,tt=$("[data-max-width-for-one-ads]").attr("data-max-width-for-one-ads")||l+d+24-c,nt=1024,ft=nt-c,k="GamePageAdDiv1",b="GamePageAdDiv2",w="GamePageAdDiv3",f=$("#"+k),u=$("#"+b),r=$("#"+w),v="ProfilePageAdDiv1",a="ProfilePageAdDiv2",e=$("#"+v),o=$("#"+a);return isEmpty=function(n){return!n||!$.trim($(n).html())},registerAd=function(n){i.push(n)},isPubadsReady=function(){return googletag.pubadsReady},refreshAds=function(n){var r,u,t;if(typeof n=="undefined"&&(n=it),isPubadsReady()){r=!1;for(id in i){if(u="#"+i[id]+" [data-js-adtype]",t=$(u),typeof t=="undefined")return;t.attr("data-js-adtype")==="iframead"?iFrameRefresh(t):t.attr("data-js-adtype")==="gptAd"&&(r=!0)}r&&googletag.cmd.push(function(){googletag.pubads().refresh()})}else n>0&&setTimeout(function(){refreshAds(--n)},rt)},iFrameRefresh=function(n){var i=n.attr("src"),r,u,t;typeof i=="string"&&(r=i.indexOf("?")<0?"?":"&",u=i+r+"nocache="+(new Date).getMilliseconds().toString(),typeof n[0]!="undefined")&&(t=n[0].contentDocument,t===undefined&&(t=n[0].contentWindow),t.location.href!=="about:blank"&&t.location.replace(u))},getAds=function(n,t,i){i.length&&isEmpty(i)&&(i.append(n),refreshAds())},adjustAdsFitScreen=function(){var i=$(window).width();Roblox.AdsHelper.adRightTemplate=Roblox.AdsHelper.adRightTemplate?Roblox.AdsHelper.adRightTemplate:t.html(),Roblox.AdsHelper.adLeftTemplate=Roblox.AdsHelper.adLeftTemplate?Roblox.AdsHelper.adLeftTemplate:n.html(),Roblox.AdsHelper.adLeaderboardTemplate=Roblox.AdsHelper.adLeaderboardTemplate?Roblox.AdsHelper.adLeaderboardTemplate:h.html(),Roblox.AdsHelper.adGamePageAdDiv1Template=Roblox.AdsHelper.adGamePageAdDiv1Template?Roblox.AdsHelper.adGamePageAdDiv1Template:f.html(),Roblox.AdsHelper.adGamePageAdDiv2Template=Roblox.AdsHelper.adGamePageAdDiv2Template?Roblox.AdsHelper.adGamePageAdDiv2Template:u.html(),Roblox.AdsHelper.adGamePageAdDiv3Template=Roblox.AdsHelper.adGamePageAdDiv3Template?Roblox.AdsHelper.adGamePageAdDiv3Template:r.html(),Roblox.AdsHelper.adProfilePageAdDiv1Template=Roblox.AdsHelper.adProfilePageAdDiv1Template?Roblox.AdsHelper.adProfilePageAdDiv1Template:e.html(),Roblox.AdsHelper.adProfilePageAdDiv2Template=Roblox.AdsHelper.adProfilePageAdDiv2Template?Roblox.AdsHelper.adProfilePageAdDiv2Template:o.html(),i>=g?(getAds(Roblox.AdsHelper.adLeftTemplate,y,n),getAds(Roblox.AdsHelper.adRightTemplate,s,t)):i<g&&i>=tt?(getAds(Roblox.AdsHelper.adRightTemplate,s,t),n.empty()):(t.empty(),n.empty()),i<ut?h.empty():getAds(Roblox.AdsHelper.adLeaderboardTemplate,p,h),i<ft?(f.html(""),u.html(""),r.html(""),e.html(""),o.html("")):(getAds(Roblox.AdsHelper.adGamePageAdDiv1Template,k,f),getAds(Roblox.AdsHelper.adGamePageAdDiv2Template,b,u),getAds(Roblox.AdsHelper.adGamePageAdDiv3Template,w,r),getAds(Roblox.AdsHelper.adProfilePageAdDiv1Template,v,e),getAds(Roblox.AdsHelper.adProfilePageAdDiv2Template,a,o))},{registerAd:registerAd,refreshAds:refreshAds,adjustAdsFitScreen:adjustAdsFitScreen,getAds:getAds}}(),Roblox.AdsHelper.DynamicAdCreator=function(){function n(){var n=$(".dynamic-ad").filter(".unpopulated");n.each(function(n,t){var i=$(t),u=i.attr("data-ad-slot"),f=parseInt(i.attr("data-ad-width")),e=parseInt(i.attr("data-ad-height")),r=i.children(".ad-slot").attr("id");googletag.cmd.push(function(){var n=googletag.defineSlot(u,[f,e],r).addService(googletag.pubads());googletag.display(r),googletag.pubads().refresh([n])}),i.removeClass("unpopulated")})}return{populateNewAds:n}}(),$(function(){$(window).resize(function(){Roblox.AdsHelper.AdRefresher.adjustAdsFitScreen()})});

;// Game/SignupWallPlayButton.js
$(function(){$("#signup-wall-button").click(function(){var r=$(this),t=r.data("place-id"),i=function(n){window.location.href="/games/"+t.toString()+"/view?autoplayUserId="+n.toString()},u={onSignupSuccess:function(n){i(n)},onLoginSuccess:function(n){i(n)}};Roblox.GamePlayEvents.SendGamePlayIntent("PlayButtonSignup",t),Roblox.SignupOrLoginModal.show(u)})});

;// widgets/Favorites.js
$(function(){Roblox=Roblox||{};var r=$(".rbx-icon-favorite"),u=$(".favorite-button-container"),f=r.length,e=r.data("signin-url"),l="Login Required",o="Remove from favorites",s="Add to favorites",a="<div>You must be logged in to favorite this game.</div><div>Please <a href='"+e+"'>Login or Register</a> to continue</div>",t=$(".favoriteCount"),n=0,h=$(".favorite-button, .rbx-icon-favorite"),i=h.hasClass("favorited"),c=i?o:s,v=["0","1","2","3","4","5","6","7","8","9"];f?u.attr("data-original-title",c):u.attr("title",c),h.click(function(){var r=$(this);r.hasClass("rbx-icon-favorite")&&r.attr("data-isguest").toLowerCase()==="true"?Roblox.GenericConfirmation.open({titleText:l,bodyContent:a,onAccept:function(){window.location.href=e},acceptColor:Roblox.GenericConfirmation.blue,acceptText:"Login",declineText:"Cancel",allowHtmlContentInBody:!0}):$.post(r.data("toggle-url"),{assetID:r.data("assetid")},function(u){var h,c,a,y,l,e;if(u.success){for(r.toggleClass("favorited"),h=!0,c=t.text(),a=0;a<c.length&&h;a++)y=c[a],y!==","&&$.inArray(y,v)<0&&(h=!1);h&&(c=c.replace(",",""),n=parseInt(c,10)),l="",e="",i?(l=o,h&&!isNaN(n)&&(n--,e=n.toString(10),n>=1e4?e="10K+":n>=1e3&&(e=[e.slice(0,1),",",e.slice(1)].join("")),n>0?t.text(e):t.text("0"))):(l=s,h&&!isNaN(n)&&(n++,e=n.toString(10),n>=1e4?e="10K+":n>=1e3&&(e=[e.slice(0,1),",",e.slice(1)].join("")),n>0?t.text(e):t.text("0"))),i=!i,f?r.closest(".favorite-button-container").attr("data-original-title",l):r.closest("a").attr("title",l)}})})});

;// NumberFormatting.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.NumberFormatting=="undefined"&&(Roblox.NumberFormatting=function(){var n=function(n){if(typeof n!="number")throw"'number' is not a number";return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t=function(t){var i,r,u;if(typeof t!="number")throw"'number' is not a number";var f=1e4,e=1e6,o=1e9;return t==0?"0":t<f?n(t):(i="B+",r=9,t<e?(i="K+",r=3):t<o&&(i="M+",r=6),u=t.toString(),u.substring(0,u.length-r)+i)};return{abbreviatedFormat:t,commas:n}}());

;// PrivateServers/PrivateServer.js
var Roblox=Roblox||{};Roblox.PrivateServer=function(){var o=".tab-server-only .rbx-vip-server-item-container",tt="#rbx-vip-servers .rbx-vip-server-template",u=0,b=$("#rbx-vip-servers").attr("data-slow-game-fps-threshold"),i=$(".rbx-vip-server-create"),d=i.data("expected-price"),s=$("#rbx-vip-servers").attr("data-instance-list-url"),p=$("#rbx-vip-servers").attr("data-renew-url"),e,n=$(o),nt={Active:1,Inactive:2,Canceled:3},g={UserInitiated:1,InsufficientFunds:2,DisallowedByGameDeveloper:3},r=!1;$(document).ready(function(){Roblox.PrivateServer.initCreateVipServerBtn()});$(".rbx-tab a[href='#game-instances']").on("shown.bs.tab",function(){Roblox.PrivateServer.initServerTab()});var k=function(){if(Roblox.PrivateServer.canInit()!==!1){n.on("click",".rbx-vip-server-configure",function(n){n.preventDefault();var t=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id"),i=$("#rbx-vip-servers").attr("data-configure-base-url"),r=window.String.format(i,t);window.location.href=r});n.on("click",".rbx-vip-server-shutdown",function(n){n.preventDefault();var t=$("#rbx-vip-servers").attr("data-placeid"),i=$(n.target).parents(".rbx-vip-server-item").attr("data-gameinstance-id"),r=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id");Roblox.GameInstance.shutdownInstance(t,i,r),$(this).parents(".rbx-vip-server-menu").find(".rbx-menu-item").popover("hide")});$(".rbx-vip-servers-footer").on("click",".rbx-vip-servers-load-more",function(n){n.preventDefault();var r=$("#rbx-vip-servers").attr("data-universeid"),t=$(o),u=t.attr("data-current-page"),f=t.attr("data-total-pages"),i=u+1;i<=f&&Roblox.PrivateServer.fetchServers(r,i)});Roblox.PrivateServer.fetchFirstServers()}},rt=function(){i.on("click",function(n){n.preventDefault();var t;try{t=$("#private-server-purchase-body-content").html(),i.attr("data-purchase-body-content",t),$("#ItemPurchaseAjaxData").attr("data-footer-text",i.attr("data-footer-text")),Roblox.PrivateServer.privateServerPurchaseItem.openPurchaseVerificationView("#rbx-vip-servers .rbx-vip-server-create"),e=$(".GenericModalBody .private-server-name"),$(".ConfirmationModal .TopBody").addClass("private-server-purchase-modal")}catch(n){}})},it=function(){if(u>0)return!1;u+=1;var n=!1,t=$("#rbx-vip-servers").attr("data-is-user-authenticated");return(t&&t.toLowerCase()==="true"&&(n=!0),!n)?!1:!0},w=function(){n.empty()},y=function(t,i){i=i==undefined||i<1?1:i,$.ajax({type:"GET",url:s,data:{universeId:t,page:i},cache:!1,contentType:"application/json; charset=utf-8",success:function(t){var f=t.Instances,i=$("<div></div>"),u=t.CurrentPage,e=t.TotalPages,o=$(".rbx-vip-servers-load-more"),s,h,c;n.attr("data-current-page",u),n.attr("data-total-pages",e),$.each(f,function(n,t){i.append(a(t))}),u===1?n.html(i.html()):n.append(i.html()),h=c=function(){r=!1;var n=$(".rbx-vip-server-create").attr("data-continueshopping-url");n&&(document.location.href=n)},s=function(n){r||(r=!0,$.ajax({type:"POST",url:p,data:{__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),privateServerId:n,expectedPrice:d},success:h,error:c}))};n.find(".rbx-vip-server-renew").on("click",function(n){var t=$(n.target).parents(".rbx-vip-server-item").attr("data-server-id");n.preventDefault(),Roblox.GenericConfirmation.open({titleText:Roblox.PrivateServers.RenewRecurringTitle,bodyContent:Roblox.PrivateServers.RenewRecurringBody,acceptText:Roblox.PrivateServers.RenewRecurringAcceptText,acceptColor:Roblox.GenericConfirmation.green,onAccept:function(){s(t)},declineText:Roblox.PrivateServers.RenewRecurringDeclineText,allowHtmlContentInBody:!0,dismissable:!0})});f.length===0&&n.append($("<p class='empty-server-list'> No VIP Server Instances Found. </p>")),u<e?o.removeClass("hidden"):o.addClass("hidden"),Roblox.PrivateServer.populateAvatarImages(),Roblox.PrivateServer.bindPopovers()},error:function(){n.find(".loading").remove().append("<p class='empty-server-list'>Sorry, something went wrong loading places.</p>")}})},v=function(){var n=$("#rbx-vip-servers").attr("data-universeid");Roblox.PrivateServer.fetchServers(n,1)},a=function(n){var t=$(tt).clone(),h=n.PlaceCapacity,u=[],r;n.GameInstance!=null&&(u=n.GameInstance.PlayerIds);var c=u.length,i=Math.floor(Math.random()*1e6),l='<a class="rbx-menu-item" data-toggle="popover-dynamic" data-bind="game-vip-server-context-menu-'+i+'" data-original-title="" title="" data-viewport=".rbx-vip-server-item" ><span class="rbx-icon-more"></span></a><div class="rbx-popover-content" data-toggle="game-vip-server-context-menu-'+i+'"><ul class="rbx-dropdown-menu" role="menu"><li><a href="#" class="rbx-vip-server-configure">Configure</a></li><li><a href="#" class="rbx-vip-server-shutdown">Shut Down This Server</a></li></ul>',a=n.Name,f=n.PrivateServer.OwnerUserId,e=n.PrivateServerOwnerName,o=n.PrivateServer.StatusType===nt.Canceled&&n.MostRecentPrivateServerStatusChangeReasonType===g.InsufficientFunds;t.find(".rbx-vip-server-item .rbx-title").text(a),t.find(".rbx-vip-server-status").text(c+" of "+h+" Players Max"),t.find(".rbx-vip-server-join").attr("data-placeid",n.PlaceId),t.find(".rbx-vip-server-item").attr("data-universeid",n.PrivateServer.UniverseId).attr("data-does-belong-to-user",n.DoesBelongToUser).attr("data-server-id",n.PrivateServer.Id).attr("data-is-cancelled-insufficient-funds",o),n.GameInstance&&t.find(".rbx-vip-server-item").attr("data-gameinstance-id",n.GameInstance.Id),n.UserCanConfigure&&n.UserCanShutdown&&t.find(".rbx-vip-server-menu").html(l),t.find(".rbx-menu-item").attr("data-bind","game-vip-server-context-menu-"+i),t.find(".rbx-popover-content").attr("data-toggle","game-vip-server-context-menu-"+i),n.PrivateServer&&n.PrivateServer.StatusType!==1?t.find(".rbx-vip-server-join").hide():t.find(".rbx-vip-server-join").attr("onclick",n.JoinScript);var v="data-retry-url='/avatar-thumbnail/json?userId="+f+"&width=100&height=100&format=PNG'",s=Roblox.PrivateServers.UserProfileAbsoluteUrlPattern.replace("/users/0/profile","/users/"+f+"/profile"),y="<a class='owner-avatar' href='"+s+"' "+v+" title='"+e+"'><img src='/images/transparent.gif'></a>",p="<a href='"+s+"' class='rbx-link'>"+e+"</a>";return t.find(".rbx-vip-owner").html(y+p),n.GamesInstance!=null&&n.GamesInstance.Fps>b?t.find(".rbx-vip-server-alert").addClass("hidden"):n.GamesInstance==null&&t.find(".rbx-vip-server-alert").addClass("hidden"),(!n.DoesBelongToUser||n.IsPrivateServerSubscriptionActive)&&t.find(".rbx-vip-server-subscription-alert").addClass("hidden"),n.CanRenew||t.find(".rbx-vip-server-renew").addClass("hidden"),o&&n.DoesBelongToUser?t.find(".rbx-vip-server-item").addClass("rbx-vip-server-cancelled-insufficient-funds"):t.find(".rbx-vip-server-insufficient-funds").addClass("hidden"),r="",$.each(u,function(n,t){var i="data-retry-url='/avatar-thumbnail/json?userId="+t+"&width=48&height=48&format=PNG'";r+=t>0?"<span class='player-avatar'><a href='/users/"+t+"/profile' "+i+" ><img src='/images/transparent.gif'></a></span>":"<span class='player-avatar'><a "+i+" ><img src='/images/transparent.gif'></a></span>"}),t.find(".rbx-vip-server-players").html(r),t=t.html()},l=function(){$("#rbx-vip-servers .player-avatar a").loadRobloxThumbnails(),$("#rbx-vip-servers .owner-avatar").loadRobloxThumbnails()},c=function(){$('#rbx-vip-servers [data-toggle="popover-dynamic"]').popover({html:!0,placement:"bottom",content:function(){var n=$(this).attr("data-bind");return $('[data-toggle="'+n+'"]').html()}})},h=function(n){$(".GenericModalBody .private-server-name-error-message").text(n).show()},f=function(){$.modal.close(".ProcessingView")},t=Roblox.ItemPurchase(function(){},function(n){var s,r,u,c,o,l;return(u=$("#rbx-vip-servers"),r=e.val(),o=u.attr("data-private-server-name-max-length"),l=u.attr("data-private-server-name-error-text"),r.trim().length<1||r.length>o)?(h(window.String.format(l,o)),!1):(s=i.attr("data-purchase-url"),c={__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),universeId:i.attr("data-universe-id"),privateServerName:r,productId:n.productId,expectedCurrency:n.expectedCurrency,expectedPrice:n.expectedPrice,expectedSellerId:n.expectedSellerId},$.ajax({type:"POST",url:s,data:c,success:function(n){var i;f(),"statusCode"in n&&n.statusCode!==200?t.openErrorView(n):("status"in n||(n={status:"error",showDivID:"TransactionFailureView",title:"Transaction Failed",errorMsg:"Transaction encountered an unexpected error."}),n.status==="success"?(i=String.format($("#rbx-vip-servers").attr("data-configure-base-url"),n.PrivateServerId),$("#ItemPurchaseAjaxData").attr("data-continueshopping-url",i),t.openPurchaseConfirmationView(n)):t.openErrorView(n))},error:function(n){var i=$.parseJSON(n.responseText);f(),t.openErrorView(i)}}),t.showProcessingModal("PurchaseVerificationView"),!1)});return{initServerTab:k,canInit:it,initCreateVipServerBtn:rt,fetchServers:y,fetchFirstServers:v,populateAvatarImages:l,bindPopovers:c,clearInstances:w,privateServerPurchaseItem:t}}();

;// StringTruncator.js
function InitStringTruncator(){isInitialized||(fitStringSpan=document.createElement("span"),fitStringSpan.style.display="inline-block",fitStringSpan.style.visibility="hidden",fitStringSpan.style.height="0px",fitStringSpan.style.padding="0px",document.body.appendChild(fitStringSpan),isInitialized=!0)}function fitStringToWidth(n,t,i){function o(n){return n.replace("<","&lt;").replace(">","&gt;")}var u,r,f,e,s;if(isInitialized||InitStringTruncator(),i&&(fitStringSpan.className=i),u=o(n),fitStringSpan.innerHTML=u,fitStringSpan.offsetWidth>t){for(r=0,e=n.length;s=e-r>>1;)f=r+s,fitStringSpan.innerHTML=o(n.substring(0,f))+"&hellip;",fitStringSpan.offsetWidth>t?e=f:r=f;u=n.substring(0,r)+"&hellip;"}return u}function fitStringToWidthSafe(n,t,i){var r=fitStringToWidth(n,t,i),u;return r.indexOf("&hellip;")!=-1&&(u=r.lastIndexOf(" "),u!=-1&&u+10<=r.length&&(r=r.substring(0,u+2)+"&hellip;")),r}function fitStringToWidthSafeText(n,t,i){return fitStringToWidthSafe(n,t,i).replace("&hellip;","...")}var isInitialized=!1,fitStringSpan=null;

;// GameItemCard.js
var Roblox=Roblox||{};$(function(){var n=$("[data-voting-processed=false]");n.each(function(n,t){var r=$(t),u=parseInt(r.attr("data-upvotes")),f=parseInt(r.attr("data-downvotes")),i=0;i=u>0&&f===0?100:Math.floor(u/(u+f)*100),i>100&&(i=100),r.find(".votes").css("width",i+"%"),r.attr("data-voting-processed",!0)})});

;// GameInstances/GameInstance.js
var Roblox=Roblox||{};Roblox.GameInstance=function(){var t="#rbx-running-games .rbx-game-server-item-container",u="#rbx-running-games .rbx-game-server-template",r=0,n=$(t);$(".rbx-tab a[href='#game-instances']").on("shown.bs.tab",function(){Roblox.GameInstance.init()});var f=function(){if(!(r>0)){r+=1,Roblox.GameInstance.fetchFirstServers();$(".rbx-running-games-refresh").on("click",function(){Roblox.GameInstance.fetchFirstServers()});$("body").on("click",function(n){$('[data-toggle="popover-dynamic"]').each(function(){$(this).is(n.target)||$(this).has(n.target).length!==0||$(this).siblings(".popover").has(n.target).length!==0||$(this).popover("hide")})});n.on("click",".rbx-game-server-shutdown",function(n){n.preventDefault();var t=$("#rbx-running-games").attr("data-showshutdown"),i=$("#rbx-running-games").attr("data-placeid"),r=$(n.target).parents(".rbx-game-server-item").attr("data-gameid");t&&Roblox.GameInstance.shutdownInstance(i,r),$(this).parents(".rbx-game-server-menu").find(".rbx-menu-item").popover("hide")});$(".rbx-running-games-load-more").on("click",function(){var n=$(t+" .rbx-game-server-item").length,i=$("#rbx-running-games").attr("data-placeId");Roblox.GameInstance.fetchServers(i,n)})}},e=function(n,t){var r=$(u).clone(),c=n.Capacity,s=n.CurrentPlayers,l=s.length,a='<a class="rbx-menu-item" data-toggle="popover-dynamic" data-bind="game-server-context-menu-'+e+'" data-original-title="" title="" data-viewport=".rbx-game-server-item" ><i class="rbx-icon-more"></i></a><div class="rbx-popover-content" data-toggle="game-server-context-menu-'+e+'"><ul class="rbx-dropdown-menu" role="menu"><!--<li><a href="#">Configure</a></li>--><li><a href="#" class="rbx-game-server-shutdown">Shut Down This Server</a></li></ul>',e=Math.floor(Math.random()*1e6),o;r.find(".rbx-game-server-title").html("&nbsp;"),r.find(".rbx-game-server-status").text(l+" of "+c+" Players Max"),r.find(".rbx-game-server-join").attr("data-placeid",n.PlaceId),r.find(".rbx-game-server-item").attr("data-gameid",n.Guid).attr("data-show-shutdown-all",n.ShowShutdownAllButton),t&&r.find(".rbx-game-server-menu").html(a),r.find(".rbx-menu-item").attr("data-bind","game-server-context-menu-"+e),r.find(".rbx-popover-content").attr("data-toggle","game-server-context-menu-"+e),r.find(".rbx-game-server-join").attr("onclick",n.JoinScript),n.ShowSlowGameMessage||r.find(".rbx-game-server-alert").addClass("hidden"),o="";for(i in s){var f=s[i],v=f.Thumbnail.IsFinal,h="";v||(h="data-retry-url='/avatar-thumbnail/json?userId="+f.Id+"&width=48&height=48&format=PNG'"),o+=f.Id>0?"<span class='player-avatar'><a href='/users/"+f.Id+"/profile' "+h+" title='"+f.Username+"'><img src='"+f.Thumbnail.Url+"'></a></span>":"<span class='player-avatar'><a "+h+" title='"+f.Username+"'><img src='"+f.Thumbnail.Url+"'></a></span>"}return r.find(".rbx-game-server-players").html(o),r=r.html()},o=function(){$("#rbx-running-games .player-avatar a").loadRobloxThumbnails()},s=function(){$('#rbx-running-games [data-toggle="popover-dynamic"]').popover({html:!0,placement:"bottom",content:function(){var n=$(this).attr("data-bind");return $('[data-toggle="'+n+'"]').html()}})},h=function(){n.empty()},c=function(n,t,i){var r={__RequestVerificationToken:$("[name=__RequestVerificationToken]").val(),placeId:n,gameId:t};typeof i!="undefined"&&(r.privateServerId=i),$.ajax({type:"POST",url:"/game-instances/shutdown",data:r,success:function(){},error:function(){}})},l=function(i,r){r=r==undefined?0:r,$.ajax({type:"GET",url:"/games/getgameinstancesjson",data:{placeId:i,startindex:r},cache:!1,contentType:"application/json; charset=utf-8",success:function(i){var f=i.Collection,o=i.ShowShutdownAllButton,u,s;$("#rbx-running-games").attr("data-showshutdown",o),u=$("<div></div>");for(s in f)u.append(e(f[s],o));r==0?n.html(u.html()):n.append(u.html()),f.length==0&&n.append($("<p class='empty'><strong> No Servers Found. </strong></div>"));var c=$(t+" .rbx-game-server-item").length,l=i.Collection.length,a=i.TotalCollectionSize,h=$(".rbx-running-games-load-more");l>0&&c<a?h.removeClass("hidden"):h.addClass("hidden"),Roblox.GameInstance.populateAvatarImages(".player-avatar a"),Roblox.GameInstance.bindPopovers()},error:function(){n.find(".loading").remove().append("<div class='empty'>Sorry, something went wrong loading places.</div>")}})},a=function(){var n=$("#rbx-running-games").attr("data-placeid");Roblox.GameInstance.fetchServers(n,0)};return{init:f,fetchServers:l,fetchFirstServers:a,populateAvatarImages:o,bindPopovers:s,clearInstances:h,shutdownInstance:c}}();

;// GenericModal.js
typeof Roblox.GenericModal=="undefined"&&(Roblox.GenericModal=function(){function s(u,f,e,s,h,c){var l,a;t.isOpen=!0,n=$.extend({},n,c),i=s,l=$("div.GenericModal").filter(":first"),l.find("div.Title").text(u),f===null?l.addClass("noImage"):(l.find("img.GenericModalImage").attr("src",f),l.removeClass("noImage")),l.find("div.Message").html(e),h&&(l.removeClass("smallModal"),l.addClass("largeModal")),a=l.find(o),a.attr("class","btn-large "+n.acceptColor),a.unbind(),a.bind("click",function(){r()}),l.modal(n)}function r(){t.isOpen=!1,$.modal.close(),typeof i=="function"&&i()}var f="btn-primary",u="btn-neutral",e="btn-negative",o=".ImageButton.btn-neutral.btn-large.roblox-ok",t={isOpen:!1},n={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},acceptColor:u},i;return $(function(){$(document).on("click",".GenericModal .roblox-ok",function(){r()})}),{close:r,open:s,status:t,green:f,blue:u,gray:e}}()),Roblox.GenericModal.Resources={ErrorText:"Error",ErrorMessage:"Sorry, an error occurred."},$(document).keypress(function(n){n.which===13&&Roblox.GenericModal.status.isOpen&&Roblox.GenericModal.close()});

;// Login/SignupOrLoginModal.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.SignupOrLoginModal=="undefined"&&(Roblox.SignupOrLoginModal=function(){var n=function(n){var t=$(".signup-or-log-in-modal"),i;t.bootstrapModal({backdrop:"static",keyboard:!0}),$(".modal-backdrop").click(function(){t.bootstrapModal("hide")}),Roblox.SignupOrLogin.init(n),i=t.find(".signup-or-log-in"),Roblox.SignupOrLogin.resetParams(i)},t=function(n,t){var i=$(".signup-or-log-in-modal .signup-or-log-in");Roblox.SignupOrLogin.addSignupParam(i,n,t)};return{show:n,addSignupParam:t}}()),$(function(){var n=$(".signup-or-log-in-modal");n.find(".close-button").click(function(){var n=$(this),t=n.parent(".signup-or-log-in-modal");t.bootstrapModal("hide")});$(document).on("keyup.dismiss.modal",function(n){n.which==27&&$(".modal").bootstrapModal("hide")})});

;// Login/SignupOrLogIn.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.SignupOrLogin=="undefined"&&(Roblox.SignupOrLogin=function(){var r={unknown:1,male:2,female:3},u={signup:0,login:1},f={signup:0,login:1,captcha:2,twostep:3},n,t,e=function(t){typeof n=="function"&&n(t)},o=function(n){typeof t=="function"&&t(n)},i=function(n){n.data("params",{})},s=function(r){typeof r.onSignupSuccess=="function"&&(n=r.onSignupSuccess),typeof r.onLoginSuccess=="function"&&(t=r.onLoginSuccess),i($(".signup-or-log-in"))},h=function(n,t,i){var r=n.data("params");typeof r=="undefined"&&(r={}),r[t]={name:t,value:i},n.data("params",r)};return{GenderType:r,SectionType:f,CaptchaFlowType:u,addSignupParam:h,onLoginSuccess:o,onSignupSuccess:e,resetParams:i,init:s}}()),Roblox.Animated2014SignupFormValidator=function(){"use strict";function n(n){var t="";return Roblox.SignupFormValidatorGeneric.usernameTooLong(n)&&(t=Roblox.Resources.AnimatedSignupFormValidator.userNameRange?Roblox.Resources.AnimatedSignupFormValidator.userNameRange:Roblox.Resources.AnimatedSignupFormValidator.tooLong),Roblox.SignupFormValidatorGeneric.usernameTooShort(n)&&(t=Roblox.Resources.AnimatedSignupFormValidator.userNameRange?Roblox.Resources.AnimatedSignupFormValidator.userNameRange:Roblox.Resources.AnimatedSignupFormValidator.tooShort),Roblox.SignupFormValidatorGeneric.usernameRegexInvalid(n)&&(t=Roblox.Resources.AnimatedSignupFormValidator.invalidCharacters),Roblox.SignupFormValidatorGeneric.usernameStartsOrEndsWithUnderscore&&Roblox.SignupFormValidatorGeneric.usernameStartsOrEndsWithUnderscore(n)&&(t=Roblox.Resources.AnimatedSignupFormValidator.startsOrEndsWithUnderscore),Roblox.SignupFormValidatorGeneric.usernameHasMoreThanOneUnderscore&&Roblox.SignupFormValidatorGeneric.usernameHasMoreThanOneUnderscore(n)&&(t=Roblox.Resources.AnimatedSignupFormValidator.moreThanOneUnderscore),t}function t(n,t){var i="";return Roblox.SignupFormValidatorGeneric.passwordTooLong&&Roblox.SignupFormValidatorGeneric.passwordTooLong(n)?i=Roblox.Resources.AnimatedSignupFormValidator.tooLong:Roblox.SignupFormValidatorGeneric.passwordTooShort(n)?i=Roblox.Resources.AnimatedSignupFormValidator.tooShort:(Roblox.SignupFormValidatorGeneric.passwordEnoughLetters&&!Roblox.SignupFormValidatorGeneric.passwordEnoughLetters(n)&&(i=Roblox.Resources.AnimatedSignupFormValidator.needsFourLetters),Roblox.SignupFormValidatorGeneric.passwordEnoughNumbers&&!Roblox.SignupFormValidatorGeneric.passwordEnoughNumbers(n)&&(i=Roblox.Resources.AnimatedSignupFormValidator.needsTwoNumbers),Roblox.SignupFormValidatorGeneric.passwordContainsSpaces&&Roblox.SignupFormValidatorGeneric.passwordContainsSpaces(n)&&(i=Roblox.Resources.AnimatedSignupFormValidator.noSpaces),Roblox.SignupFormValidatorGeneric.passwordIsUsername&&Roblox.SignupFormValidatorGeneric.passwordIsUsername(n,t)&&(i=Roblox.Resources.AnimatedSignupFormValidator.passwordIsUsername)),Roblox.SignupFormValidatorGeneric.weakPassword(n)&&(i=Roblox.Resources.AnimatedSignupFormValidator.weakKey),i}return{verifyUsername:n,verifyPassword:t}}();

;// Tracking/FormEvents.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.FormEvents=="undefined"&&(Roblox.FormEvents=function(){function n(n,t,i){Roblox.EventStream&&Roblox.EventStream.SendEvent(n,t,i)}function t(t,i,r,u){var f={msg:u,input:r,field:i,vis:!0};n("formValidation",t,f)}function i(t,i){var r={aType:"focus",field:i};n("formInteraction",t,r)}function r(t,i){var r={aType:"offFocus",field:i};n("formInteraction",t,r)}function u(t,i){var r={aType:"click",field:i};n("formInteraction",t,r)}return{SendValidationFailed:t,SendInteractionFocus:i,SendInteractionOffFocus:r,SendInteractionClick:u}}());

;// ~/viewapp/common/formEvents/formEvents.js
"use strict";var formEvents=angular.module("roblox.formEvents",[]);

;// ~/viewapp/common/formEvents/directives/formInteraction.js
"use strict";formEvents.directive("rbxFormInteraction",function(){return{require:"^form",restrict:"A",link:function(n,t,i,r){t.bind("blur",function(){Roblox.FormEvents&&Roblox.FormEvents.SendInteractionOffFocus(r.context,angular.element(this).attr("name"))}).bind("focus",function(){Roblox.FormEvents&&Roblox.FormEvents.SendInteractionFocus(r.context,angular.element(this).attr("name"))})}}});

;// ~/viewapp/common/formEvents/directives/formContext.js
"use strict";formEvents.directive("rbxFormContext",function(){return{require:"form",restrict:"A",link:function(n,t,i,r){var u=r.$name;r.context=i.context+u.charAt(0).toUpperCase()+u.substr(1)}}});

;// ~/viewapp/common/formEvents/directives/formValidation.js
"use strict";formEvents.directive("rbxFormValidation",function(){return{require:["^form","ngModel"],restrict:"A",link:function(n,t,i,r){n.$watch(function(){var n=r[1];return n.$modelValue},function(t){var i=r[1],f=r[0],u;(n.badSubmit||i.$dirty)&&i.$invalid&&(u=i.redactedInput?"[Redacted]":t,Roblox.FormEvents&&Roblox.FormEvents.SendValidationFailed(f.context,i.$name,u,i.$validationMessage))})}}});

;// ~/viewapp/common/formEvents/directives/formValidationRedactInput.js
"use strict";formEvents.directive("rbxFormValidationRedactInput",function(){return{require:"ngModel",restrict:"A",link:function(n,t,i,r){r.redactedInput=!0}}});

;// ~/viewapp/common/signupOrLogin/signupOrLogin.js
"use strict";var signupOrLogin=angular.module("SignupOrLogin",["roblox.formEvents","robloxApp.helpers"]);

;// ~/viewapp/common/signupOrLogin/controllers/captchaController.js
"use strict";signupOrLogin.controller("CaptchaController",["$scope","$http","$rootElement","captchaService",function(n,t,i,r){var u=function(){Recaptcha.reload()};n.isSubmitting=!1,n.submitCaptcha=function(t){r.submitCaptcha(t,u,n)},n.isSectionShown=!1,n.$on("display:updated",function(t,i){n.$validationMessage="",n.isSectionShown=i===Roblox.SignupOrLogin.SectionType.captcha}),n.captchaFlowType=Roblox.SignupOrLogin.CaptchaFlowType.signup,n.$on("captcha:loaded",function(t,i){n.captchaResponse="",n.captchaFlowType=i.captchaFlow,n.username=i.username,u(),n.isSectionShown=!0,Roblox.SignupOrLoginIframe&&Roblox.SignupOrLoginIframe.resizeFrame(Roblox.SignupOrLogin.SectionType.captcha)})}]);

;// ~/viewapp/common/signupOrLogin/controllers/loginController.js
"use strict";signupOrLogin.controller("LoginController",["$scope","displayService","captchaService","loginService",function(n,t,i,r){var u,f;n.login={},n.badSubmit=!1,n.submitLogin=function(t){if(n.loginForm.$invalid){t.preventDefault(),n.badSubmit=!0,n.loginForm.username.$validationMessage="Username is required.",n.loginForm.password.$validationMessage="Password is required.";return}n.loginForm.username.showValidation=!1,n.loginForm.password.showValidation=!1,n.badSubmit=!1,r.executeLogin(n)},u=13,n.enterLogin=function(t){t.which==u&&n.submitLogin(t)},n.requestTwoStepCode=function(){r.requestTwoStepCode(n)},n.enterTwoStepCode=function(t){t.which==u&&n.submitTwoStepCode(t)},n.submitTwoStepCode=function(t){if(n.twoStepVerificationForm.twoStepCode.$setValidity("twostep",!0),n.twoStepVerificationForm.$invalid||n.loginForm.$invalid){t.preventDefault(),n.badSubmit=!0;return}r.submitTwoStepCode(t,n)},f=angular.element(".signup-or-log-in").data("is-login-default-section"),n.isSectionShown=f,n.isTwoStepSectionShown=!1,n.$on("display:updated",function(t,i){n.isSectionShown=i===Roblox.SignupOrLogin.SectionType.login,n.isTwoStepSectionShown=i===Roblox.SignupOrLogin.SectionType.twostep,n.isSectionShown&&(Roblox.SignupOrLoginIframe&&Roblox.SignupOrLoginIframe.resizeFrame(Roblox.SignupOrLogin.SectionType.login),n.badSubmit=!1,n.login={},n.twoStepVerification={},n.isSubmitting=!1,n.loginForm.$setPristine(),n.$generalError=!1,n.twoStepVerificationForm&&(n.twoStepVerificationForm.twoStepCode.$validationMessage="",n.twoStepVerificationForm.$setPristine()))}),n.$on("captcha:loginSuccess",function(){r.executeLogin(n)})}]);

;// ~/viewapp/common/signupOrLogin/controllers/signupController.js
"use strict";signupOrLogin.controller("SignupController",["$scope","$http","displayService","captchaService","signupService",function(n,t,i,r,u){n.signup={},n.signup.gender=Roblox.SignupOrLogin.GenderType.unknown,n.setGender=function(t,i){n.signup.gender=i,t.preventDefault()},n.showBirthdayValidation=function(){return(n.badSubmit||n.signupForm.birthdayMonth.$dirty&&n.signupForm.birthdayDay.$dirty&&n.signupForm.birthdayYear.$dirty)&&(!n.isValidBirthday(n.signup.birthdayDay)||n.signupForm.birthdayYear.$invalid)},n.isValidBirthday=function(t){var u,i,r;return n.signupForm.birthdayMonth.$invalid?!1:(u=n.signup.birthdayYear?n.signup.birthdayYear:"2014",i=new Date(n.signup.birthdayMonth+" "+t+" "+u),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))?!1:i.getDate().toString()!=t?!1:(r=new Date,i.getTime()<r.getTime()&&i.getFullYear()>r.getFullYear()-100)},n.badSubmit=!1,n.isSubmitting=!1,n.submitSignup=function(){if(n.signupForm.$valid&&n.signup.gender!==Roblox.SignupOrLogin.GenderType.unknown&&n.isValidBirthday(n.signup.birthdayDay))n.badSubmit=!1;else{n.badSubmit=!0;return}n.isSubmitting=!0,u.submitSignup(n)};var f=angular.element(".signup-or-log-in").data("is-login-default-section");n.isSectionShown=f===!1,n.$on("display:updated",function(t,i){n.isSectionShown=i===Roblox.SignupOrLogin.SectionType.signup,n.isSectionShown&&(Roblox.SignupOrLoginIframe&&Roblox.SignupOrLoginIframe.resizeFrame(Roblox.SignupOrLogin.SectionType.signup),n.signup={},n.badSubmit=!1,n.signupForm.$setPristine(),n.signupForm.$generalError=!1)}),n.$on("captcha:signupSuccess",function(){u.submitSignup(n)})}]);

;// ~/viewapp/common/signupOrLogin/directives/showSection.js
"use strict";signupOrLogin.directive("rbxShowSection",["$rootScope","displayService",function(n,t){return{restrict:"A",scope:{sectionType:"="},link:function(i,r){r.bind("click",function(){var u=t.getDisplayState(),r;t.setDisplayState(i.sectionType),n.$apply(),Roblox.EventStream&&(r={nodeName:this.nodeName,toSectionType:i.sectionType,fromSectionType:u},Roblox.EventStream.SendEvent("formSectionToggle","authForm",r))})}}}]);

;// ~/viewapp/common/signupOrLogin/directives/validBirthday.js
"use strict";signupOrLogin.directive("rbxValidBirthday",function(){return{require:"ngModel",link:function(n,t,i,r){n.$watch(function(){return!angular.isUndefined(r.$modelValue)&&r.$modelValue!==""},function(n){r.$setValidity("birthday",n),r.$validationMessage="Invalid birthday"})}}});

;// ~/viewapp/common/signupOrLogin/directives/validPassword.js
"use strict";signupOrLogin.directive("rbxValidPassword",function(){return{require:"ngModel",link:function(n,t,i,r){n.$watch(function(){return!angular.isUndefined(r.$modelValue)&&Roblox.Animated2014SignupFormValidator.verifyPassword(r.$modelValue,n.signup.username)},function(t){r.$setValidity("password",angular.isString(r.$modelValue)&&t===""),r.$validationMessage=angular.isString(r.$modelValue)?t:"Please enter a password.",n.$unitTestValidationMessage=r.$validationMessage})}}});

;// ~/viewapp/common/signupOrLogin/directives/validPasswordConfirm.js
"use strict";signupOrLogin.directive("rbxValidPasswordConfirm",function(){return{require:"ngModel",restrict:"A",scope:{match:"=",name:"="},link:function(n,t,i,r){n.$watch(function(){return n.match===r.$modelValue},function(t){r.$validationMessage=t?angular.isString(r.$modelValue)?"":"Please enter a password confirmation.":Roblox.Resources.AnimatedSignupFormValidator.doesntMatch,n.$unitTestValidationMessage=r.$validationMessage,r.$setValidity("match",angular.isString(r.$modelValue)&&t)})}}});

;// ~/viewapp/common/signupOrLogin/directives/validUsername.js
"use strict";signupOrLogin.directive("rbxValidUsername",["$http",function(n){return{require:"ngModel",link:function(t,i,r,u){t.onChange=function(){var f=t.signup.username===""||angular.isUndefined(t.signup.username),i="",r=!1;f?(r=!0,i="Please enter a username."):(i=Roblox.Animated2014SignupFormValidator.verifyUsername(t.signup.username),i!==""&&(r=!0)),u.$setValidity("validusername",!r),r?u.$validationMessage=i:n({method:"GET",url:"/UserCheck/checkifinvalidusernameforsignup",params:{username:t.signup.username}}).success(function(n){var i=!0,r=!0,t="";n.data==1&&(i=!1,t=Roblox.Resources.AnimatedSignupFormValidator.alreadyTaken),n.data==2&&(r=!1,t=Roblox.Resources.AnimatedSignupFormValidator.cantBeUsed),u.$setValidity("unique",i),u.$setValidity("moderated",r),u.$invalid?t!=""&&(u.$validationMessage=t):u.$validationMessage=""})},t.onChange()}}}]);

;// ~/viewapp/common/signupOrLogin/services/captchaService.js
"use strict";signupOrLogin.factory("captchaService",["$rootScope","$http",function(n,t){var i=Roblox.SignupOrLogin.CaptchaFlowType.signup,u=function(n,u,f){var o=angular.element(n.target),s=angular.element(".signup-or-log-in .captcha-container"),h={recaptcha_challenge_field:s.find("#recaptcha_challenge_field").val(),recaptcha_response_field:s.find("#recaptcha_response_field").val()},e;if(f.captchaFlowType===Roblox.SignupOrLogin.CaptchaFlowType.signup)e=o.data("signup-captcha-api-url");else if(i===Roblox.SignupOrLogin.CaptchaFlowType.login)e=o.data("log-in-captcha-api-url"),h.username=f.username;else throw"Unknown Captcha flow";f.isSubmitting=!0,t({method:"POST",url:e,data:$.param(h),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0}).success(function(){f.$validationMessage="",r()}).error(function(n,t){f.isSubmitting=!1,t===403?(f.$validationMessage="Captcha incorrect",u()):(f.$validationMessage="Unknown error",u())})},r=function(){i==Roblox.SignupOrLogin.CaptchaFlowType.signup?n.$broadcast("captcha:signupSuccess"):i==Roblox.SignupOrLogin.CaptchaFlowType.login&&n.$broadcast("captcha:loginSuccess")};return{getCaptchaFlowType:function(){return i},setCaptchaFlowType:function(t,r){i=t;var u={captchaFlow:t};r&&(u.username=r),n.$broadcast("captcha:loaded",u)},onAfterCaptchaSuccess:r,submitCaptcha:u}}]);

;// ~/viewapp/common/signupOrLogin/services/displayService.js
"use strict";signupOrLogin.factory("displayService",["$rootScope","$document",function(n,t){var i=Roblox.SignupOrLogin.SectionType.signup;return{getDisplayState:function(){return i},setDisplayState:function(r){i=r,n.$broadcast("display:updated",r),t.triggerHandler("authFormToggle",{toSectionType:r})}}}]);

;// ~/viewapp/common/signupOrLogin/services/loginService.js
"use strict";signupOrLogin.factory("loginService",["$http","captchaService","displayService",function(n,t,i){var r=function(r){var u=angular.element("#login-button"),f=u.data("login-api-url");r.isSubmitting=!0,n({method:"POST",url:f,data:$.param({username:r.login.username,password:r.login.password}),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0,withCredentials:!0}).success(function(n){r.$generalError=!1,r.$generalErrorText="";Roblox.SignupOrLogin.onLoginSuccess(n.userId)}).error(function(n,u){u===403?n.message==="Captcha"?(r.isSubmitting=!1,r.isSectionShown=!1,t.setCaptchaFlowType(Roblox.SignupOrLogin.CaptchaFlowType.login,r.login.username)):n.message==="Privilege"?(r.isSubmitting=!1,r.isSectionShown=!0,alert("Sorry, privileged accounts can't log in from here.")):n.message==="TwoStepVerification"?r.requestTwoStepCode():n.message==="LoggedIn"?window.location.reload():n.message==="Credentials"?(i.getDisplayState()!==Roblox.SignupOrLogin.SectionType.login&&i.setDisplayState(Roblox.SignupOrLogin.SectionType.login),r.isSubmitting=!1,r.loginForm.username.$validationMessage="",r.loginForm.username.showValidation=!0,r.loginForm.password.$validationMessage="Your credentials were incorrect.",r.loginForm.password.showValidation=!0):(i.getDisplayState()!==Roblox.SignupOrLogin.SectionType.login&&i.setDisplayState(Roblox.SignupOrLogin.SectionType.login),r.isSubmitting=!1,r.$generalError=!0,r.$generalErrorText="Sorry, an error occurred."):(r.isSubmitting=!1,r.$generalError=!0,r.$generalErrorText="Sorry, an error occurred.")})},u=function(t){var r=angular.element("#login-button").data("two-step-code-request-url");n({method:"POST",url:r,data:$.param({actionType:0,username:t.login.username,password:t.login.password}),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0,withCredentials:!0}).success(function(){t.isSubmitting=!1,i.setDisplayState(Roblox.SignupOrLogin.SectionType.twostep)}).error(function(){i.setDisplayState(Roblox.SignupOrLogin.SectionType.login),t.isSubmitting=!1,t.$generalError=!0,t.$generalErrorText="Sorry, an error occurred."})},f=function(t,i){var f=angular.element("#login-button").data("two-step-verification-api-url");i.isSubmitting=!0,n({method:"POST",url:f,data:$.param({actionType:0,code:i.twoStepVerification.twoStepCode,username:i.login.username,password:i.login.password}),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0,withCredentials:!0}).success(function(){r(i)}).error(function(n,t){i.isSubmitting=!1,t===403?n.message==="Credentials"?(i.$generalError=!0,i.$generalErrorText="Your credentials were incorrect."):n.message==="Flooded"?(i.twoStepVerificationForm.twoStepCode.$setValidity("twostep",!1),i.twoStepVerificationForm.twoStepCode.$validationMessage="Slow down! You've made too many attempts. Try again later."):n.message==="InvalidCode"?(i.twoStepVerificationForm.twoStepCode.$setValidity("twostep",!1),i.twoStepVerificationForm.twoStepCode.$validationMessage="Your code was incorrect. Try again.",u(i)):(i.twoStepVerificationForm.twoStepCode.$setValidity("twostep",!1),i.twoStepVerificationForm.twoStepCode.$validationMessage="Sorry, an error occurred."):(i.twoStepVerificationForm.twoStepCode.$setValidity("twostep",!1),i.twoStepVerificationForm.twoStepCode.$validationMessage="Sorry, an error occurred.")})};return{executeLogin:r,requestTwoStepCode:u,submitTwoStepCode:f}}]);

;// ~/viewapp/common/signupOrLogin/services/signupService.js
"use strict";signupOrLogin.factory("signupService",["$http","captchaService","$rootElement",function(n,t){var r=function(i){var o=angular.element("#SignupButton"),s=o.data("signup-api-url"),r={},e=angular.element(".signup-or-log-in"),f=e.data("params"),u;typeof f=="undefined"&&(f={}),$.each(f,function(n,t){r[n]=t}),u=e.data("metadata-params"),typeof u=="undefined"&&(u={}),$.each(u,function(n,t){r[n]=t}),$.extend(r,{username:i.signup.username,password:i.signup.password,birthday:i.signup.birthdayDay+" "+i.signup.birthdayMonth+" "+i.signup.birthdayYear,gender:i.signup.gender,context:i.signupForm.context}),n({method:"POST",url:s,data:$.param(r),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0,withCredentials:!0}).success(function(n){Roblox.SignupOrLogin.onSignupSuccess(n.userId)}).error(function(n,r){if(i.badSubmit=!0,i.isSubmitting=!1,r===403){var u=0;n.reasons.indexOf("Captcha")!==-1&&(i.isSubmitting=!1,i.isSectionShown=!1,t.setCaptchaFlowType(Roblox.SignupOrLogin.CaptchaFlowType.signup),u+=1),n.reasons.indexOf("GenderInvalid")!==-1&&(i.signup.gender=1,u+=1),n.reasons.indexOf("PasswordInvalid")!==-1&&(i.signupForm.password.$setValidity("password",!1),i.signupForm.password.$passwordMessage="Password is invalid",u+=1),n.reasons.indexOf("UsernameInvalid")!==-1&&(i.signupForm.username.$setValidity("validusername",!1),i.signupForm.username.$usernameMessage="Username is invalid",u+=1),n.reasons.indexOf("UsernameTaken")!==-1&&(i.signupForm.username.$setValidity("unique",!1),i.signupForm.username.$usernameMessage="Username is taken",u+=1),u<n.reasons.length&&(i.signupForm.$generalError=!0,i.signupForm.$generalErrorText="Sorry, an error occurred.")}else i.signupForm.$generalError=!0,i.signupForm.$generalErrorText="Sorry, an error occurred."})},u=function(t){var h=angular.element("#SignupButton"),c=h.data("signup-api-url"),i={},e=angular.element(".signup-or-log-in"),u=e.data("params"),r;typeof u=="undefined"&&(u={}),$.each(u,function(n,t){i[n]=t}),r=e.data("metadata-params"),typeof r=="undefined"&&(r={}),$.each(r,function(n,t){i[n]=t});var f=angular.element(".signup-or-log-in .captcha-container"),o="",s="";f.length&&(o=f.find("#recaptcha_challenge_field").val(),s=f.find("#recaptcha_response_field").val()),$.extend(i,{UserName:t.signup.username,Birthday:angular.element("#BirthDayDate").val(),Email:angular.element("#Email").val(),Name:angular.element("#Name").val(),FBToken:angular.element("#FbToken").val(),GigyaUid:angular.element("#GigyaUID").val(),ReturnTo:angular.element("#ReturnTo").val(),IsGenderInputRequired:angular.element("#IsGenderInputRequired").val(),Gender:angular.element("#Gender").val(),recaptcha_challenge_field:o,recaptcha_response_field:s}),n({method:"POST",url:c,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded"},crossDomain:!0,withCredentials:!0}).success(function(n){Roblox.SignupOrLogin.onSignupSuccess(n.userId)}).error(function(n,i){if(t.badSubmit=!0,t.isSubmitting=!1,i===403){var r=0;n.reasons.indexOf("Captcha")!==-1&&(t.isSubmitting=!1,t.isSectionShown=!1,t.isCaptchaSectionShown=!0,Recaptcha.reload(),r+=1),n.reasons.indexOf("UsernameInvalid")!==-1&&(t.fbConnectForm.username.$setValidity("validusername",!1),t.fbConnectForm.username.$usernameMessage="Username is invalid",r+=1),n.reasons.indexOf("UsernameTaken")!==-1&&(t.fbConnectForm.username.$setValidity("unique",!1),t.fbConnectForm.username.$usernameMessage="Username is taken",r+=1),r<n.reasons.length&&(t.fbConnectForm.$generalError=!0,t.fbConnectForm.$generalErrorText="Sorry, an error occurred.")}else t.fbConnectForm.$generalError=!0,t.fbConnectForm.$generalErrorText="Sorry, an error occurred."})};return{submitSignup:r,socialSubmitSignup:u}}]);

;// SignupFormValidatorGeneric.js
typeof Roblox=="undefined"&&(Roblox={}),Roblox.SignupFormValidatorGeneric=function(){function n(n,t,i){return i<=0||n<=0||t<=0||t>new Date(i,n,0).getDate()}function nt(n,t,i){return i!=0&&n!=0&&t!=0}function g(n,t){return $(n).length!=0||$(t).length!=0}function d(n){return n.length>20}function k(n){return n.length<3}function b(n){var t=n.length;if(n[0]=="_"||n[t-1]=="_")return!0}function w(n){return n.split("_").length>2}function p(n){var t=n.indexOf(" ")!=-1,i=v2UsernameAndPasswordRulesEnabled==1?/^[a-zA-Z0-9_]*$/:/^[a-zA-Z0-9]*$/;return t=t||!n.match(i)}function y(n){var t=function(n){return n.data==1?1:n.data==2?2:n.data==0?0:void 0},i=function(){};$.ajax({type:"GET",url:"/UserCheck/checkifinvalidusernameforsignup?username="+n,success:t,error:i})}function v(n,t){return t==""||n.length>0&&t!=""&&n==t}function tt(n){return n.length<8}function a(n){return n.length>20}function c(n){return n.length<6}function h(n){return t(n)>3}function s(n){return l(n)>1}function o(n){return r(n)>0}function e(n,t){return n==t}function f(n){var t=["roblox123","password","password1","password12","password123","trustno1","iloveyou","princess","abcd1234","qwertyui","qwerty","football","baseball","michael","jennifer","michelle","babygirl","superman","12345678","123456789","1234567890","123123123","69696969","11111111","22222222","33333333","44444444","55555555","66666666","77777777","88888888","99999999","00000000"];for(n=n.toLowerCase(),i=0;i<t.length;i++)if(n===t[i])return!0;return!1}function u(n){return(n=n.toLowerCase(),n.indexOf("asdf")>-1)?!0:n.indexOf("pass")>-1||n.indexOf("qwer")>-1||n.indexOf("zxcv")>-1||n.indexOf("aaaa")>-1||n.indexOf("zzzz")>-1?!0:!1}function r(n){var r=/^\s$/,i=0,t;if(n==null||n=="")return 0;for(t=0;t<n.length;t++)n.charAt(t).match(r)&&(i+=1);return i}function t(n){var r=/^[A-Za-z]$/,i=0,t;if(n==null||n=="")return 0;for(t=0;t<n.length;t++)n.charAt(t).match(r)&&(i+=1);return i}function l(n){var r=/^[0-9]$/,i=0,t;if(n==null||n=="")return 0;for(t=0;t<n.length;t++)n.charAt(t).match(r)&&(i+=1);return i}v2UsernameAndPasswordRulesEnabled=parseInt($(".signup-or-log-in").attr("data-v2-username-password-rules-enabled"));return{invalidBirthday:n,selectedBirthday:nt,genderSelected:g,usernameTooLong:d,usernameTooShort:k,usernameRegexInvalid:p,usernameInvalid:y,usernameStartsOrEndsWithUnderscore:v2UsernameAndPasswordRulesEnabled==1?b:null,usernameHasMoreThanOneUnderscore:v2UsernameAndPasswordRulesEnabled==1?w:null,passwordIsUsername:e,passwordsMatch:v,weakPassword:v2UsernameAndPasswordRulesEnabled==1?f:u,passwordTooShort:v2UsernameAndPasswordRulesEnabled==1?tt:c,passwordTooLong:v2UsernameAndPasswordRulesEnabled==1?null:a,passwordEnoughLetters:v2UsernameAndPasswordRulesEnabled==1?null:h,passwordEnoughNumbers:v2UsernameAndPasswordRulesEnabled==1?null:s,passwordContainsSpaces:v2UsernameAndPasswordRulesEnabled==1?null:o}}(),typeof Roblox.Resources=="undefined"&&(Roblox.Resources={}),typeof Roblox.Resources.AnimatedSignupFormValidator=="undefined"&&v2UsernameAndPasswordRulesEnabled==1?Roblox.Resources.AnimatedSignupFormValidator={doesntMatch:"Passwords don't match",requiredField:"Required",userNameRange:"Usernames can be 3 to 20 characters long",tooShort:"Password can be of minimum 8 length",maxValid:"Too many accounts use this email",weakKey:"Please create a more complex password",invalidCharacters:"Spaces and special characters are not allowed.",invalidName:"Can't be your character name",alreadyTaken:"This username is already in use.",cantBeUsed:"Username not appropriate for ROBLOX",invalidBirthday:"Invalid birthday",loginFieldsRequired:"Username and Password are required",loginFieldsIncorrect:"Your username or password is incorrect.",invalidEmail:"Invalid email",passwordIsUsername:"Password shouldn't match username",startsOrEndsWithUnderscore:"Username can’t start or end with _",moreThanOneUnderscore:"Usernames can have at most one _"}:typeof Roblox.Resources.AnimatedSignupFormValidator=="undefined"&&(Roblox.Resources.AnimatedSignupFormValidator={doesntMatch:"Passwords don't match",requiredField:"Required",tooLong:"Too long",tooShort:"Too short",maxValid:"Too many accounts use this email",needsFourLetters:"Needs 4 letters",needsTwoNumbers:"Needs 2 numbers",noSpaces:"No spaces allowed",weakKey:"Weak key combination.",invalidCharacters:"Spaces and special characters are not allowed.",invalidName:"Can't be your character name",alreadyTaken:"Already taken",cantBeUsed:"Can't be used",invalidBirthday:"Invalid birthday",loginFieldsRequired:"Username and Password are required.",loginFieldsIncorrect:"Your username or password is incorrect.",invalidEmail:"Invalid email",passwordIsUsername:"Password shouldn't match username."});

;// Events/PageHeartbeatEvent.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.PageHeartbeatEvent=="undefined"&&(Roblox.PageHeartbeatEvent=function(){var n=function(n){Roblox.EventStream&&Roblox.EventStream.SendEvent("pageHeartbeat","heartbeat"+n,{})},t=function(){var n=$("#page-heartbeat-event-data-model");return n.data("page-heartbeat-event-intervals")},i=function(){var i=t(),r=0;if(i){function u(){if(i.length&&r<i.length){var t=i[r++];setTimeout(function(){n(r),u()},t*1e3)}}u()}},r=function(){i()};return{Init:r}}()),$(function(){Roblox.PageHeartbeatEvent.Init()});

;// GenericConfirmation.js
typeof Roblox=="undefined"&&(Roblox={}),typeof Roblox.GenericConfirmation=="undefined"&&(Roblox.GenericConfirmation=function(){function w(){n.isOpen=!1,t()}function k(t){var a,e,o,s,l;n.isOpen=!0,a={titleText:"",bodyContent:"",footerText:"",acceptText:Roblox.Resources.GenericConfirmation.yes,declineText:Roblox.Resources.GenericConfirmation.No,acceptColor:u,declineColor:f,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){}},t=$.extend({},a,t),c.overlayClose=t.dismissable,c.escClose=t.dismissable,e=$(i),e.html(t.acceptText),e.attr("class","btn-large "+t.acceptColor),e.unbind(),e.bind("click",function(){return v(e)?!1:(t.fieldValidationRequired?nt(t.onAccept):h(t.onAccept),!1)}),o=$(r),o.html(t.declineText),o.attr("class","btn-large "+t.declineColor),o.unbind(),o.bind("click",function(){return v(o)?!1:(h(t.onDecline),!1)}),$('[data-modal-handle="confirmation"] div.Title').text(t.titleText),s=$("[data-modal-handle='confirmation']"),t.imageUrl==null?s.addClass("noImage"):(s.find("img.GenericModalImage").attr("src",t.imageUrl),s.removeClass("noImage")),t.allowHtmlContentInBody?$("[data-modal-handle='confirmation'] div.Message").html(t.bodyContent):$("[data-modal-handle='confirmation'] div.Message").text(t.bodyContent),$.trim(t.footerText)==""?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').hide():$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').show(),t.allowHtmlContentInFooter?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').html(t.footerText):$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').text(t.footerText),$("[data-modal-handle='confirmation']").modal(c),l=$("a.genericmodal-close"),l.unbind(),l.bind("click",function(){return h(t.onCancel),!1}),t.xToCancel||l.hide(),t.onOpenCallback()}function a(n){n.hasClass(f)?n.addClass(s):n.hasClass(l)?n.addClass(e):n.hasClass(u)&&n.addClass(o)}function v(n){return n.hasClass(o)||n.hasClass(s)||n.hasClass(e)?!0:!1}function b(){var n=$(i),t=$(r);a(n),a(t)}function g(){var u=$(i),t=$(r),n=o+" "+s+" "+e;u.removeClass(n),t.removeClass(n)}function p(){if(n.isOpen){var t=$(i);t.click()}}function y(){var n=$(r);n.click()}function t(t){n.isOpen=!1,typeof t!="undefined"?$.modal.close(t):$.modal.close()}function h(n){t(),typeof n=="function"&&n()}function nt(n){if(typeof n=="function"){var i=n();if(i!=="undefined"&&i==!1)return!1}t()}var l="btn-primary",u="btn-neutral",f="btn-negative",e="btn-disabled-primary",o="btn-disabled-neutral",s="btn-disabled-negative",d="btn-none",i="#roblox-confirm-btn",r="#roblox-decline-btn",n={isOpen:!1},c={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:w};return{open:k,close:t,disableButtons:b,enableButtons:g,clickYes:p,clickNo:y,status:n,green:l,blue:u,gray:f,none:d}}()),$(document).keypress(function(n){Roblox.GenericConfirmation.status.isOpen&&n.which===13&&Roblox.GenericConfirmation.clickYes()});
